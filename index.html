<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><title>DN42 Realtime Network Map</title><meta name="description" content="The easiest way to visualize the DN42 network. DN42 Realtime Network Map retrieves MRT dumps from the DN42 Global Route Collector(GRC) and displays autonomous systems(ASes), their neighbors, and links on this map."><meta name="keywords" content="DN42,Map,BGP,Network,Routing,BIRD,FRR,FRRouting,Peering,ASN,Peer,Realtime,NEONETWORK,ICVPN,CHAOSVPN"><meta property="og:title" content="DN42 Realtime Network Map: The easiest way to visualize the DN42 network"><meta property="og:site_name" content="iEdon-Net"><meta property="og:type" content="website"><meta property="og:description" content="The easiest way to visualize the DN42 network. DN42 Realtime Network Map retrieves MRT dumps from the DN42 Global Route Collector(GRC) and displays autonomous systems(ASes), their neighbors, and links on this map."><meta property="og:url" content="https://map.iedon.net"><meta property="og:image" content="https://map.iedon.net/screenshot.png"><style>:root{--sans-font:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Nimbus Sans L",Roboto,Noto,"Segoe UI",Arial,Helvetica,"Helvetica Neue",sans-serif;--mono-font:Consolas,Menlo,Monaco,"Andale Mono","Ubuntu Mono",monospace}body{margin:0;overflow:hidden;background-color:#333;color:#e0e0e0;font-family:var(--sans-font)}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(51,51,51,.9);display:flex;justify-content:center;align-items:center;z-index:1000;transition:opacity .5s ease-out}#loading-overlay.hidden{opacity:0;pointer-events:none}.loading-spinner{width:50px;height:50px;margin:0 auto;border:4px solid #555;border-radius:50%;position:relative;transition:all .3s ease}.loading-spinner.fetching{border-top:4px solid #ce8815;animation:spin 1s linear infinite;background:0 0}.loading-spinner.rendering{border:4px solid #555;animation:none;background:conic-gradient(from 0deg,#ce8815 0deg,#ce8815 0deg,transparent 0deg);border-radius:50%;position:relative}.loading-spinner.rendering::after{content:"";position:absolute;top:4px;left:4px;width:42px;height:42px;background:#333;border-radius:50%}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.loading-text{margin-top:20px;font-size:14px;color:#e0e0e0;text-align:center}.loading-percentage{margin-top:10px;font-size:18px;font-weight:700;color:#ce8815;text-align:center}#header-container{position:fixed;top:0;right:0;display:flex;flex-direction:column;width:100%;z-index:100}#metadata{position:absolute;left:50%;top:0;transform:translateX(-50%);background:rgba(50,50,50,.95);border-radius:0 0 8px 8px;color:#e0e0e0;cursor:default;z-index:101;box-shadow:0 4px 12px rgba(0,0,0,.3);user-select:none;-webkit-user-select:none}.toolbar-icons{display:flex;align-items:center;gap:5px}.toolbar-icon{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;padding:4px;border-radius:6px;text-decoration:none;cursor:pointer;transition:all .2s ease;position:relative}.toolbar-icon:hover{background:rgba(221,162,13,.15);transform:translateY(-1px);box-shadow:0 2px 8px rgba(221,162,13,.3)}.toolbar-icon:active{transform:translateY(0);box-shadow:0 1px 4px rgba(221,162,13,.2)}.toolbar-icon img{width:20px;height:20px;transition:all .2s ease;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;filter:brightness(0) saturate(100%) invert(64%) sepia(84%) saturate(434%) hue-rotate(23deg) brightness(90%) contrast(89%)}.toolbar-icon:hover img{transform:scale(1.1);filter:brightness(0) saturate(100%) invert(85%) sepia(54%) saturate(434%) hue-rotate(23deg) brightness(104%) contrast(96%)}.toolbar-icon::after{content:attr(data-tooltip);position:absolute;bottom:-35px;left:50%;background:rgba(0,0,0,.8);color:#fff;padding:4px 8px;border-radius:4px;font-size:11px;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity .2s,visibility .2s;pointer-events:none}.toolbar-icon:hover::after{opacity:1;visibility:visible}#search-container{position:fixed;top:0;right:0;background:rgba(50,50,50,.9);padding:5px 10px;border-radius:0 0 0 5px;box-shadow:0 2px 5px rgba(0,0,0,.5);z-index:100}@media screen and (max-width:1280px){#metadata,#search-container{position:static!important;border-radius:0 0 0 8px!important;transform:none!important}#metadata{box-shadow:none!important}#search-container{border-radius:5px!important}#header-container{position:fixed!important;top:0!important;right:0!important;width:auto!important;display:flex!important;align-items:flex-end;flex-direction:column!important}.toolbar-icons{gap:6px}.toolbar-icon{width:28px;height:28px}.toolbar-icon img{width:18px;height:18px}}@media screen and (max-width:450px){#sidebar{width:calc(100% - 40px)!important}.toolbar-icon{width:26px;height:26px}.toolbar-icon img{width:16px;height:16px}}#map{user-select:none;-webkit-user-select:none}#myip a{text-decoration:none;color:#dda20d;cursor:pointer}#myip a:hover{opacity:.75}#tooltip{position:absolute;padding:5px;background-color:rgba(30,30,30,.9);color:#fff;font-size:12px;border-radius:5px;pointer-events:none;display:none;z-index:100}#myip{position:absolute;bottom:0;right:0;font-size:10px;font-weight:700;background:rgba(50,50,50,.9);padding:2px 10px;border-top-left-radius:5px;z-index:100;display:none;cursor:default;align-items:center;user-select:none;-webkit-user-select:none}#search-input{padding:5px;font-size:14px;background-color:rgba(46,46,46,.5);color:#e0e0e0;border:1px solid #555;border-radius:5px}#table-search{transition:all .2s ease;box-sizing:border-box;max-width:100%;width:100%;padding:8px 12px;font-size:14px;background-color:rgba(46,46,46,.9);color:#e0e0e0;border:1px solid #555;border-radius:6px;outline:0;transition:all .2s ease;box-sizing:border-box;min-width:0}#table-search:focus{border-color:#4caf50!important;box-shadow:0 0 8px rgba(76,175,80,.3)!important;background-color:#2e2e2e!important}#table-search:hover{border-color:#666!important;background-color:rgba(46,46,46,.95)!important}.table-search-container{box-sizing:border-box;width:100%;overflow:hidden;margin-bottom:15px;padding:10px;background:rgba(60,60,60,.8);border-radius:8px;box-sizing:border-box}.table-search-container input{box-sizing:border-box;width:100%;min-width:0}button{margin-left:5px;padding:5px;font-size:14px;cursor:pointer;background-color:#3b3b3b;color:#e0e0e0;border:none;border-radius:5px}button:hover{background-color:#4caf50;color:#fff}.tag{border-radius:5px;background-color:#ffca28;padding:2px;font-weight:700;font-size:12px;color:#333}.nodeInfo{padding:5px}.nodeInfo p{margin:5px auto}.nodeInfo .title{display:flex;align-items:center;justify-content:center}#sidebar{position:fixed;top:0;left:-500px;width:400px;height:calc(100% - 40px);background:#2b2b2b;box-shadow:2px 0 10px rgba(0,0,0,.5);transition:left .3s ease-in-out;padding:20px;overflow-y:auto;overflow-x:hidden;z-index:1000}#sidebar-header{display:flex;justify-content:space-between;align-items:center;font-size:16px;font-weight:700;background:#2b2b2b;position:sticky;top:-20px;height:50px;z-index:100}#close-sidebar{background:0 0;border:none;font-size:24px;cursor:pointer;color:#e0e0e0}#sidebar-content{margin-bottom:30px;font-size:14px;color:#ccc;box-sizing:border-box;width:100%;overflow-x:hidden}#sidebar-content ul{padding-left:20px}#sidebar-content li{margin:5px 0}#sidebar-content a{font-weight:400;cursor:pointer;color:#4caf50;text-decoration:none}#sidebar-content a:hover{font-weight:700;color:#81c784}.emphasized{color:#fff;font-weight:700;margin-top:30px}.whois{max-width:400px;overflow:hidden;color:#e0e0e0}.whois table{width:100%;margin:10px auto 0;border-collapse:collapse;table-layout:fixed}.whois .remarks{overflow-x:scroll;overflow-y:hidden;white-space:nowrap}.whois .remarks p{line-height:1em;font-size:12px;font-family:var(--mono-font);text-align:center;padding:0;margin:0}.whois .remarks p:first-child{margin-top:10px}.whois tr:nth-child(even){background-color:#383838}.whois tr:hover{background-color:#1f6922}.whois td,.whois th{padding:5px;font-size:12px;text-align:left;overflow-wrap:break-word}.whois td.mono{font-family:var(--mono-font);color:#ff005d}.whois th{cursor:pointer;user-select:none;-webkit-user-select:none}.whois th.sort-asc::after{content:" ↑"}.whois th.sort-desc::after{content:" ↓"}.whois .key{font-size:12px;font-weight:700;color:#81c784;text-align:left}.whois td.center{text-align:center}.whois td.right{text-align:right}.whois td.asn,.whois td.from,.whois td.index,.whois td.name,.whois td.rank,.whois td.to{cursor:pointer}.whois .rank{width:15%}.whois .index{width:15%}.whois .asn{width:30%}.whois .name{width:40%}.whois .from,.whois .to{width:15%;text-align:center}*{scrollbar-width:thin;scrollbar-color:#388e3c #2b2b2b}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:#2b2b2b;border-radius:5px}::-webkit-scrollbar-thumb{background:#388e3c;border-radius:5px;border:2px solid #2b2b2b;transition:background .3s ease}::-webkit-scrollbar-thumb:hover{background:#81c784}::-webkit-scrollbar-thumb:disabled{background:#555}::-webkit-scrollbar-corner{background:#2e2e2e}.centrality{background:linear-gradient(90deg,#4caf50,#3a8fb7);border-radius:8px;color:#fff;padding:15px 20px;margin:10px auto 30px auto;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,.2)}.centrality .param{flex:1}.centrality .param div{display:flex;justify-content:space-between;font-size:10px;margin:1px 10px 1px 0;color:#eee}.centrality .param div strong{color:#fff}.centrality .index{flex:1;text-align:center;display:flex;flex-direction:column}.centrality .rank{flex:.5;text-align:center;display:flex;flex-direction:column}.centrality .index span,.centrality .rank span{font-size:10px;margin-bottom:5px;color:#eee}.centrality .index strong,.centrality .rank strong{text-align:center;font-size:20px;letter-spacing:1px;font-family:Impact,Haettenschweiler,"Arial Narrow Bold",sans-serif}#map-version-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:all .3s ease}#map-version-overlay.show{opacity:1;visibility:visible}.map-version-popup{background:#1e1e1e;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.5);width:90%;max-width:800px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden;transform:scale(.9);transition:transform .3s ease}#map-version-overlay.show .map-version-popup{transform:scale(1)}.map-version-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:linear-gradient(135deg,#2d2d2d,#1a1a1a);border-bottom:1px solid #404040}.map-version-title{color:#e0e0e0;font-size:18px;font-weight:600;margin:0;display:flex;align-items:center;gap:10px}.map-version-title svg{color:#ce8815}.map-version-close{background:0 0;border:none;color:#999;font-size:24px;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.map-version-close:hover{background:rgba(206,136,21,.15);color:#ce8815}.map-version-nav{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#252525;border-bottom:1px solid #404040}.nav-left{flex:0 0 auto;font-size:12px}.nav-center{flex:1;text-align:center}.nav-center h3{color:#e0e0e0;margin:0;font-size:16px;font-weight:600}.quick-actions{display:flex;gap:8px}.quick-btn{display:flex;align-items:center;gap:6px;padding:8px 16px;background:#4caf50;border:none;border-radius:6px;color:#fff;font-size:14px;cursor:pointer;transition:all .2s ease}.quick-btn:hover{background:#45a049;transform:translateY(-1px)}.map-version-content{flex:1;overflow-y:auto;padding:20px 24px;min-height:300px}.calendar-section{margin-bottom:20px}.calendar-nav{margin-bottom:20px;display:flex;justify-content:center}.year-select{padding:8px 16px;background:#2a2a2a;border:1px solid #404040;border-radius:6px;color:#e0e0e0;font-size:16px;cursor:pointer}.calendar-months{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.calendar-month{background:#2a2a2a;border:1px solid #404040;border-radius:8px;padding:16px;text-align:center;transition:all .2s ease;cursor:default}.calendar-month.has-data{cursor:pointer;border-color:#555}.calendar-month.has-data:hover{background:rgba(206,136,21,.1);border-color:rgba(206,136,21,.5);transform:translateY(-2px)}.calendar-month.current{border-color:#4caf50;background:rgba(76,175,80,.1)}.month-name{color:#e0e0e0;font-weight:600;margin-bottom:8px}.month-count{color:#999;font-size:14px}.calendar-month.has-data .month-count{color:#ce8815;font-weight:500}.month-details{margin-bottom:20px}.back-btn{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#404040;border:none;border-radius:6px;color:#e0e0e0;cursor:pointer;transition:all .2s ease}.back-btn:hover{background:#555}.files-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:12px}.file-card{background:#2a2a2a;border:1px solid #404040;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s ease;position:relative}.file-card:hover{background:rgba(206,136,21,.1);border-color:rgba(206,136,21,.5);transform:translateY(-2px)}.file-card.current{border-color:#4caf50;background:rgba(76,175,80,.15)}.file-date{color:#e0e0e0;font-weight:500;margin-bottom:4px}.file-name{color:#999;font-size:13px;font-family:var(--mono-font)}.map-version-error{text-align:center;color:#999;padding:40px 20px}.map-version-error svg{margin-bottom:16px;color:#ce8815}.map-version-error p{margin:8px 0}.retry-btn{padding:8px 16px;background:#ce8815;border:none;border-radius:6px;color:#fff;cursor:pointer;margin-top:16px;transition:all .2s ease}.retry-btn:hover{background:#b8730f}.map-version-loading{text-align:center;padding:40px 20px}@media screen and (max-width:768px){.map-version-popup{width:95%;max-height:95vh}.calendar-months{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}.files-grid{grid-template-columns:1fr}}</style></head><body><div id="loading-overlay"><div><div class="loading-spinner fetching"></div><div class="loading-text">Fetching</div><div class="loading-percentage" style="display:none">0%</div></div></div><div id="header-container"><div id="metadata">Loading...</div><div id="search-container"><input id="search-input" type="text" placeholder="ASN / Name..."> <button id="search-btn">Search</button></div></div><div id="sidebar"><div id="sidebar-header"><span id="sidebar-title"></span> <button id="close-sidebar">&times;</button></div><div id="sidebar-content"></div></div><canvas id="map"></canvas><div id="tooltip"></div><div id="myip"></div><script type="module">let t=null,e=null,n=null,r=null;const i=()=>{t=document.getElementById("loading-overlay"),r=document.querySelector(".loading-percentage"),e=document.querySelector(".loading-spinner"),n=document.querySelector(".loading-text")},o=(i,o)=>{e&&n&&r&&(t.style.display="flex",t.classList.remove("hidden"),e.className="loading-spinner fetching",e.style.background="none",r.style.display="none","fetching"===i?n.textContent=o||"Fetching":"parsing"===i?n.textContent=o||"Preprocessing DN42 Map Data":"rendering"===i&&(e.className="loading-spinner rendering",r.style.display="block",r.textContent="0%",n.textContent=o||"Rendering DN42 Network Map",a(0)))},s=()=>{t&&(t.classList.add("hidden"),setTimeout(()=>{t&&(t.style.display="none")},500))},a=t=>{if(!e||!e.classList.contains("rendering"))return;const n=t/100*360;e.style.background=`conic-gradient(from 0deg, #ce8815 0deg, #ce8815 ${n}deg, transparent ${n}deg)`},u=t=>{if(r){let e=Math.max(0,Math.min(100,Math.round((1-t)/1*100)));e>=98&&(e=100),r.textContent=`${e}%`,a(e)}},l={pageTitle:"DN42 Realtime Network Map",binVendorMagic:"IEDON.NET",render:{pixelRatio:window.devicePixelRatio||1,d3force:{linkDistance:100,manyBodyStrength:-500,alphaDecay:.05},canvas:{initialScale:1.45,backgroundColor:"#333",viewportMargin:0},node:{minSize:3,maxSize:15,scaleSqrtDomain:[1500,1e4],scaleSqrtRange:[1,15],colorDefault:"orange",colorCurrent:"red",colorLinked:"#667dfd",labelColor:"#fff",labelFontSizePx:7,labelFontSizeMaxPx:13,labelFontFamily:'-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Nimbus Sans L",Roboto,Noto,"Segoe UI",Arial,Helvetica,"Helvetica Neue",sans-serif',labelCulling:{baseZoomThreshold:.65,highZoomThreshold:2,maxLabelsInView:100,importanceThresholdRange:[500,50]},maxFPS:75},link:{colorDefault:"#1d5232",colorEmphasize:"#ce8815",widthDefault:.5,widthEmphasize:1}},dn42:{accessingFromDn42:window.location.href.includes(".dn42"),whoisApi:window.location.href.includes(".dn42")?"https://map.dn42/asn/":"https://api.iedon.com/dn42/asn/",explorerUrl:window.location.href.includes(".dn42")?"http://explorer.burble.dn42/?#/":"https://explorer.burble.com/?#/",homeUrl:window.location.href.includes(".dn42")?"https://wiki.dn42/":"https://dn42.dev/",routeGraphsUrl:window.location.href.includes(".dn42")?"http://routegraphs.highdef.dn42/":"https://routegraphs.highdef.network/",peerFinderUrl:"https://dn42.us/peers/",myIpUrl:`${location.protocol}//map.dn42/myip/`,myIpApi:`${location.protocol}//map.dn42/myip/api`,rawJsonApiUrl:window.location.href.includes(".dn42")?"https://wiki.dn42/internal/Internal-Services#map-dn42-api-services":"https://wiki.dn42.dev/internal/Internal-Services#map-dn42-api-services",queryRoutesUrl:window.location.href.includes(".dn42")?"https://lg.iedon.dn42/route_all/us-lax+us-sjc+jp-tyo+jp-kot+jp-118+de-fra+hk-hkg+cn-czx+cn-ntg+sg-sin/":"https://lg.iedon.net/route_all/us-lax+us-sjc+jp-tyo+jp-kot+jp-118+de-fra+hk-hkg+cn-czx+cn-ntg+sg-sin/",routeGraphInitiateAsn:4242422189,toolboxUrl:"https://dn42.g-load.eu/toolbox/",timeMachineBinUrlPrefix:"https://mrt.iedon.net/map"}};var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={exports:{}},h={exports:{}},d={},p={},y,v;function m(){if(v)return y;return v=1,y=function(t,e){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(i,s){n[r]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(t){o&&(o=!1,s(t))}})},y}var g={},w,b,_,x,k,O,A;function E(){return w||(w=1,function(t){var e=t;e.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var n=new Array(64),r=new Array(123),i=0;i<64;)r[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;e.encode=function(t,e,r){for(var i,o=null,s=[],a=0,u=0;e<r;){var l=t[e++];switch(u){case 0:s[a++]=n[l>>2],i=(3&l)<<4,u=1;break;case 1:s[a++]=n[i|l>>4],i=(15&l)<<2,u=2;break;case 2:s[a++]=n[i|l>>6],s[a++]=n[63&l],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=n[i],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var o="invalid encoding";e.decode=function(t,e,n){for(var i,s=n,a=0,u=0;u<t.length;){var l=t.charCodeAt(u++);if(61===l&&a>1)break;if(void 0===(l=r[l]))throw Error(o);switch(a){case 0:i=l,a=1;break;case 1:e[n++]=i<<2|(48&l)>>4,i=l,a=2;break;case 2:e[n++]=(15&i)<<4|(60&l)>>2,i=l,a=3;break;case 3:e[n++]=(3&i)<<6|l,a=0}}if(1===a)throw Error(o);return n-s},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}(g)),g}function N(){if(_)return b;function t(){this._listeners={}}return _=1,b=t,t.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},t.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},t.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this},b}function j(){if(k)return x;function t(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function a(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:o,t.writeFloatBE=r?o:i,t.readFloatLE=r?s:a,t.readFloatBE=r?a:s}():function(){function o(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(e)/Math.LN2);t((i<<31|o+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,n,r)}}function s(t,e,n){var r=t(e,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=o.bind(null,e),t.writeFloatBE=o.bind(null,n),t.readFloatLE=s.bind(null,r),t.readFloatBE=s.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function a(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:o,t.writeDoubleBE=r?o:i,t.readDoubleLE=r?s:a,t.readDoubleBE=r?a:s}():function(){function o(t,e,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)t(0,i,o+e),t(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))t(0,i,o+e),t(2146959360,i,o+n);else if(r>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)t((a=r/5e-324)>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(a=r*Math.pow(2,-u))>>>0,i,o+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function s(t,e,n,r,i){var o=t(r,i+e),s=t(r,i+n),a=2*(s>>31)+1,u=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===u?l?NaN:a*(1/0):0===u?5e-324*a*l:a*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=o.bind(null,e,0,4),t.writeDoubleBE=o.bind(null,n,4,0),t.readDoubleLE=s.bind(null,r,0,4),t.readDoubleBE=s.bind(null,i,4,0)}(),t}function e(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function n(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function r(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}return k=1,x=t(t)}function S(){if(A)return O;function t(t){try{var e=eval("quire".replace(/^/,"re"))(t);if(e&&(e.length||Object.keys(e).length))return e}catch(t){}return null}return A=1,O=t,O}var T={},$,M,R,I,C,B,L,z,F,D,P,q,V,U;function J(){return $||($=1,function(t){var e=t;e.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},e.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,o=[],s=0;e<n;)(r=t[e++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},e.write=function(t,e,n){for(var r,i,o=n,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=t.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-o}}(T)),T}function H(){if(R)return M;return R=1,M=function(t,e,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return t(n);s+n>r&&(o=t(r),s=0);var a=e.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}}function X(){if(C)return I;C=1,I=e;var t=W();function e(t,e){this.lo=t>>>0,this.hi=e>>>0}var n=e.zero=new e(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var r=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(t){if(0===t)return n;var r=t<0;r&&(t=-t);var i=t>>>0,o=(t-i)/4294967296>>>0;return r&&(o=~o>>>0,i=~i>>>0,++i>4294967295&&(i=0,++o>4294967295&&(o=0))),new e(i,o)},e.from=function(r){if("number"==typeof r)return e.fromNumber(r);if(t.isString(r)){if(!t.Long)return e.fromNumber(parseInt(r,10));r=t.Long.fromString(r)}return r.low||r.high?new e(r.low>>>0,r.high>>>0):n},e.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},e.prototype.toLong=function(e){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var i=String.prototype.charCodeAt;return e.fromHash=function(t){return t===r?n:new e((i.call(t,0)|i.call(t,1)<<8|i.call(t,2)<<16|i.call(t,3)<<24)>>>0,(i.call(t,4)|i.call(t,5)<<8|i.call(t,6)<<16|i.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10},I}function W(){return B||(B=1,function(){var t=p;function e(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function n(t){function n(t,r){if(!(this instanceof n))return new n(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&e(this,r)}return n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),n}t.asPromise=m(),t.base64=E(),t.EventEmitter=N(),t.float=j(),t.inquire=S(),t.utf8=J(),t.pool=H(),t.LongBits=X(),t.isNode=Boolean(void 0!==c&&c&&c.process&&c.process.versions&&c.process.versions.node),t.global=t.isNode&&c||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||p,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},t.isString=function(t){return"string"==typeof t||t instanceof String},t.isObject=function(t){return t&&"object"==typeof t},t.isset=t.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){var r=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(r.lo,r.hi,n):r.toNumber(Boolean(n))},t.merge=e,t.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},t.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}()),p}function Y(){if(z)return L;z=1,L=u;var t,e=W(),n=e.LongBits,r=e.base64,i=e.utf8;function o(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function s(){}function a(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new o(s,0,0),this.tail=this.head,this.states=null}var l=function(){return e.Buffer?function(){return(u.create=function(){return new t})()}:function(){return new u}};function c(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function h(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function d(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}u.create=l(),u.alloc=function(t){return new e.Array(t)},e.Array!==Array&&(u.alloc=e.pool(u.alloc,e.Array.prototype.subarray)),u.prototype._push=function(t,e,n){return this.tail=this.tail.next=new o(t,e,n),this.len+=e,this},f.prototype=Object.create(o.prototype),f.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this._push(h,10,n.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var e=n.from(t);return this._push(h,e.length(),e)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var e=n.from(t).zzEncode();return this._push(h,e.length(),e)},u.prototype.bool=function(t){return this._push(c,1,t?1:0)},u.prototype.fixed32=function(t){return this._push(d,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var e=n.from(t);return this._push(d,4,e.lo)._push(d,4,e.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this._push(e.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this._push(e.float.writeDoubleLE,8,t)};var p=e.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};return u.prototype.bytes=function(t){var n=t.length>>>0;if(!n)return this._push(c,1,0);if(e.isString(t)){var i=u.alloc(n=r.length(t));r.decode(t,i,0),t=i}return this.uint32(n)._push(p,n,t)},u.prototype.string=function(t){var e=i.length(t);return e?this.uint32(e)._push(i.write,e,t):this._push(c,1,0)},u.prototype.fork=function(){return this.states=new a(this),this.head=this.tail=new o(s,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(s,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},u.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},u._configure=function(e){t=e,u.create=l(),t._configure()},L}function G(){if(D)return F;D=1,F=n;var t=Y();(n.prototype=Object.create(t.prototype)).constructor=n;var e=W();function n(){t.call(this)}function r(t,n,r){t.length<40?e.utf8.write(t,n,r):n.utf8Write?n.utf8Write(t,r):n.write(t,r)}return n._configure=function(){n.alloc=e._Buffer_allocUnsafe,n.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},n.prototype.bytes=function(t){e.isString(t)&&(t=e._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(n.writeBytesBuffer,r,t),this},n.prototype.string=function(t){var n=e.Buffer.byteLength(t);return this.uint32(n),n&&this._push(r,n,t),this},n._configure(),F}function K(){if(q)return P;q=1,P=o;var t,e=W(),n=e.LongBits,r=e.utf8;function i(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}var s,a="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")},u=function(){return e.Buffer?function(n){return(o.create=function(n){return e.Buffer.isBuffer(n)?new t(n):a(n)})(n)}:a};function l(){var t=new n(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw i(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw i(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function c(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw i(this,8);return new n(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}return o.create=u(),o.prototype._slice=e.Array.prototype.subarray||e.Array.prototype.slice,o.prototype.uint32=(s=4294967295,function(){if(s=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return s;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return s}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return c(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|c(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var t=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var t=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),n=this.pos,r=this.pos+t;if(r>this.len)throw i(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(n,r);if(n===r){var o=e.Buffer;return o?o.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,n,r)},o.prototype.string=function(){var t=this.bytes();return r.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw i(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw i(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o._configure=function(n){t=n,o.create=u(),t._configure();var r=e.Long?"toLong":"toNumber";e.merge(o.prototype,{int64:function(){return l.call(this)[r](!1)},uint64:function(){return l.call(this)[r](!0)},sint64:function(){return l.call(this).zzDecode()[r](!1)},fixed64:function(){return f.call(this)[r](!0)},sfixed64:function(){return f.call(this)[r](!1)}})},P}function Z(){if(U)return V;U=1,V=n;var t=K();(n.prototype=Object.create(t.prototype)).constructor=n;var e=W();function n(e){t.call(this,e)}return n._configure=function(){e.Buffer&&(n.prototype._slice=e.Buffer.prototype.slice)},n.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},n._configure(),V}var Q={},tt,et,nt,rt,it,ot;function st(){if(et)return tt;et=1,tt=e;var t=W();function e(e,n,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");t.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(n),this.responseDelimited=Boolean(r)}return(e.prototype=Object.create(t.EventEmitter.prototype)).constructor=e,e.prototype.rpcCall=function e(n,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return t.asPromise(e,a,n,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(n,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,e){if(t)return a.emit("error",t,n),s(t);if(null!==e){if(!(e instanceof i))try{e=i[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,n),s(t)}return a.emit("data",e,n),s(null,e)}a.end(!0)})}catch(t){return a.emit("error",t,n),void setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},e.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},tt}function at(){return nt||(nt=1,Q.Service=st()),Q}function ut(){return it?rt:(it=1,rt={})}function lt(){return ot||(ot=1,function(){var t=d;function e(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=Y(),t.BufferWriter=G(),t.Reader=K(),t.BufferReader=Z(),t.util=W(),t.rpc=at(),t.roots=ut(),t.configure=e,e()}()),d}var ct={},ft={exports:{}},ht,dt,pt,yt;function vt(){if(dt)return ht;function t(e,n){"string"==typeof e&&(n=e,e=void 0);var r=[];function i(e){if("string"!=typeof e){var n=o();if(t.verbose&&console.log("codegen: "+n),n="return "+n,e){for(var s=Object.keys(e),a=new Array(s.length+1),u=new Array(s.length),l=0;l<s.length;)a[l]=s[l],u[l]=e[s[l++]];return a[l]=n,Function.apply(null,a).apply(null,u)}return Function(n)()}for(var c=new Array(arguments.length-1),f=0;f<c.length;)c[f]=arguments[++f];if(f=0,e=e.replace(/%([%dfijs])/g,function(t,e){var n=c[f++];switch(e){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),f!==c.length)throw Error("parameter count mismatch");return r.push(e),i}function o(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=o,i}return dt=1,ht=t,t.verbose=!1,ht}function mt(){if(yt)return pt;yt=1,pt=n;var t=m(),e=S()("fs");function n(r,i,o){return"function"==typeof i?(o=i,i={}):i||(i={}),o?!i.xhr&&e&&e.readFile?e.readFile(r,function(t,e){return t&&"undefined"!=typeof XMLHttpRequest?n.xhr(r,i,o):t?o(t):o(null,i.binary?e:e.toString("utf8"))}):n.xhr(r,i,o):t(n,this,r,i)}return n.xhr=function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(e.binary){var t=r.response;if(!t){t=[];for(var i=0;i<r.responseText.length;++i)t.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return n(null,r.responseText)}},e.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",t),r.send()},pt}var gt={},wt,bt,_t,xt,kt,Ot,At,Et,Nt,jt,St,Tt,$t,Mt,Rt;function It(){return wt||(wt=1,function(t){var e=t,n=e.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=e.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(t),i="";r&&(i=e.shift()+"/");for(var o=0;o<e.length;)".."===e[o]?o>0&&".."!==e[o-1]?e.splice(--o,2):r?e.splice(o,1):++o:"."===e[o]?e.splice(o,1):++o;return i+e.join("/")};e.resolve=function(t,e,i){return i||(e=r(e)),n(e)?e:(i||(t=r(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+e):e)}}(gt)),gt}function Ct(){if(_t)return bt;_t=1,bt=u;var t=Ee();((u.prototype=Object.create(t.prototype)).constructor=u).className="Namespace";var e,n,r,i=Oe(),o=xe(),s=Ae();function a(t,e){if(t&&t.length){for(var n={},r=0;r<t.length;++r)n[t[r].name]=t[r].toJSON(e);return n}}function u(e,n){t.call(this,e,n),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function l(t){t._nestedArray=null,t._lookupCache={};for(var e=t;e=e.parent;)e._lookupCache={};return t}return u.fromJSON=function(t,e){return new u(t,e.options).addJSON(e.nested)},u.arrayToJSON=a,u.isReservedId=function(t,e){if(t)for(var n=0;n<t.length;++n)if("string"!=typeof t[n]&&t[n][0]<=e&&t[n][1]>e)return!0;return!1},u.isReservedName=function(t,e){if(t)for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=o.toArray(this.nested))}}),u.prototype.toJSON=function(t){return o.toObject(["options",this.options,"nested",a(this.nestedArray,t)])},u.prototype.addJSON=function(t){if(t)for(var o,s=Object.keys(t),a=0;a<s.length;++a)o=t[s[a]],this.add((void 0!==o.fields?e.fromJSON:void 0!==o.values?r.fromJSON:void 0!==o.methods?n.fromJSON:void 0!==o.id?i.fromJSON:u.fromJSON)(s[a],o));return this},u.prototype.get=function(t){return this.nested&&this.nested[t]||null},u.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof r)return this.nested[t].values;throw Error("no such enum: "+t)},u.prototype.add=function(t){if(!(t instanceof i&&void 0!==t.extend||t instanceof e||t instanceof s||t instanceof r||t instanceof n||t instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var o=this.get(t.name);if(o){if(!(o instanceof u&&t instanceof u)||o instanceof e||o instanceof n)throw Error("duplicate name '"+t.name+"' in "+this);for(var a=o.nestedArray,c=0;c<a.length;++c)t.add(a[c]);this.remove(o),this.nested||(this.nested={}),t.setOptions(o.options,!0)}}else this.nested={};this.nested[t.name]=t,this instanceof e||this instanceof n||this instanceof r||this instanceof i||t._edition||(t._edition=t._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var f=this;f=f.parent;)f._needsRecursiveFeatureResolution=!0,f._needsRecursiveResolve=!0;return t.onAdd(this),l(this)},u.prototype.remove=function(e){if(!(e instanceof t))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),l(this)},u.prototype.define=function(t,e){if(o.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var n=this;t.length>0;){var r=t.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else n.add(n=new u(r))}return e&&n.addJSON(e),n},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var t=this.nestedArray,e=0;for(this.resolve();e<t.length;)t[e]instanceof u?t[e++].resolveAll():t[e++].resolve();return this._needsRecursiveResolve=!1,this},u.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,t.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},u.prototype.lookup=function(t,e,n){if("boolean"==typeof e?(n=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),o.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;var r=t.join(".");if(""===t[0])return this.root.lookup(t.slice(1),e);var i=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+r];if(i&&(!e||e.indexOf(i.constructor)>-1))return i;if((i=this._lookupImpl(t,r))&&(!e||e.indexOf(i.constructor)>-1))return i;if(n)return null;for(var s=this;s.parent;){if((i=s.parent._lookupImpl(t,r))&&(!e||e.indexOf(i.constructor)>-1))return i;s=s.parent}return null},u.prototype._lookupImpl=function(t,e){if(Object.prototype.hasOwnProperty.call(this._lookupCache,e))return this._lookupCache[e];var n=this.get(t[0]),r=null;if(n)1===t.length?r=n:n instanceof u&&(t=t.slice(1),r=n._lookupImpl(t,t.join(".")));else for(var i=0;i<this.nestedArray.length;++i)this._nestedArray[i]instanceof u&&(n=this._nestedArray[i]._lookupImpl(t,e))&&(r=n);return this._lookupCache[e]=r,r},u.prototype.lookupType=function(t){var n=this.lookup(t,[e]);if(!n)throw Error("no such type: "+t);return n},u.prototype.lookupEnum=function(t){var e=this.lookup(t,[r]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},u.prototype.lookupTypeOrEnum=function(t){var n=this.lookup(t,[e,r]);if(!n)throw Error("no such Type or Enum '"+t+"' in "+this);return n},u.prototype.lookupService=function(t){var e=this.lookup(t,[n]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},u._configure=function(t,i,o){e=t,n=i,r=o},bt}function Bt(){if(kt)return xt;kt=1,xt=r;var t=Oe();((r.prototype=Object.create(t.prototype)).constructor=r).className="MapField";var e=ke(),n=xe();function r(e,r,i,o,s,a){if(t.call(this,e,r,o,void 0,void 0,s,a),!n.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}return r.fromJSON=function(t,e){return new r(t,e.id,e.keyType,e.type,e.options,e.comment)},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},r.prototype.resolve=function(){if(this.resolved)return this;if(void 0===e.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return t.prototype.resolve.call(this)},r.d=function(t,e,i){return"function"==typeof i?i=n.decorateType(i).name:i&&"object"==typeof i&&(i=n.decorateEnum(i).name),function(o,s){n.decorateType(o.constructor).add(new r(s,t,e,i))}},xt}function Lt(){if(At)return Ot;At=1,Ot=n;var t=Ee();((n.prototype=Object.create(t.prototype)).constructor=n).className="Method";var e=xe();function n(n,r,i,o,s,a,u,l,c){if(e.isObject(s)?(u=s,s=a=void 0):e.isObject(a)&&(u=a,a=void 0),void 0!==r&&!e.isString(r))throw TypeError("type must be a string");if(!e.isString(i))throw TypeError("requestType must be a string");if(!e.isString(o))throw TypeError("responseType must be a string");t.call(this,n,u),this.type=r||"rpc",this.requestType=i,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=c}return n.fromJSON=function(t,e){return new n(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},n.prototype.toJSON=function(t){var n=!!t&&Boolean(t.keepComments);return e.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",n?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),t.prototype.resolve.call(this))},Ot}function zt(){if(Nt)return Et;Nt=1,Et=i;var t=Ct();((i.prototype=Object.create(t.prototype)).constructor=i).className="Service";var e=Lt(),n=xe(),r=at();function i(e,n){t.call(this,e,n),this.methods={},this._methodsArray=null}function o(t){return t._methodsArray=null,t}return i.fromJSON=function(t,n){var r=new i(t,n.options);if(n.methods)for(var o=Object.keys(n.methods),s=0;s<o.length;++s)r.add(e.fromJSON(o[s],n.methods[o[s]]));return n.nested&&r.addJSON(n.nested),n.edition&&(r._edition=n.edition),r.comment=n.comment,r._defaultEdition="proto3",r},i.prototype.toJSON=function(e){var r=t.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return n.toObject(["edition",this._editionToJSON(),"options",r&&r.options||void 0,"methods",t.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(i.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=n.toArray(this.methods))}}),i.prototype.get=function(e){return this.methods[e]||t.prototype.get.call(this,e)},i.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;t.prototype.resolve.call(this);for(var e=this.methodsArray,n=0;n<e.length;++n)e[n].resolve();return this},i.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,t.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},i.prototype.add=function(n){if(this.get(n.name))throw Error("duplicate name '"+n.name+"' in "+this);return n instanceof e?(this.methods[n.name]=n,n.parent=this,o(this)):t.prototype.add.call(this,n)},i.prototype.remove=function(n){if(n instanceof e){if(this.methods[n.name]!==n)throw Error(n+" is not a member of "+this);return delete this.methods[n.name],n.parent=null,o(this)}return t.prototype.remove.call(this,n)},i.prototype.create=function(t,e,i){for(var o,s=new r.Service(t,e,i),a=0;a<this.methodsArray.length;++a){var u=n.lcFirst((o=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[u]=n.codegen(["r","c"],n.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return s},Et}function Ft(){if(St)return jt;St=1,jt=e;var t=W();function e(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)this[e[n]]=t[e[n]]}return e.create=function(t){return this.$type.create(t)},e.encode=function(t,e){return this.$type.encode(t,e)},e.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},e.decode=function(t){return this.$type.decode(t)},e.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},e.verify=function(t){return this.$type.verify(t)},e.fromObject=function(t){return this.$type.fromObject(t)},e.toObject=function(t,e){return this.$type.toObject(t,e)},e.prototype.toJSON=function(){return this.$type.toObject(this,t.toJSONOptions)},jt}function Dt(){if($t)return Tt;$t=1,Tt=function(i){for(var o=n.codegen(["r","l","e"],i.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(i.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),s=0;s<i.fieldsArray.length;++s){var a=i._fieldsArray[s].resolve(),u=a.resolvedType instanceof t?"int32":a.type,l="m"+n.safeProp(a.name);o("case %i: {",a.id),a.map?(o("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==e.defaults[a.keyType]?o("k=%j",e.defaults[a.keyType]):o("k=null"),void 0!==e.defaults[u]?o("value=%j",e.defaults[u]):o("value=null"),o("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===e.basic[u]?o("value=types[%i].decode(r,r.uint32())",s):o("value=r.%s()",u),o("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==e.long[a.keyType]?o('%s[typeof k==="object"?util.longToHash(k):k]=value',l):o("%s[k]=value",l)):a.repeated?(o("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==e.packed[u]&&o("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,u)("}else"),void 0===e.basic[u]?o(a.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",l,s):o("%s.push(r.%s())",l,u)):void 0===e.basic[u]?o(a.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",l,s):o("%s=r.%s()",l,u),o("break")("}")}for(o("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<i._fieldsArray.length;++s){var c=i._fieldsArray[s];c.required&&o("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",r(c))}return o("return m")};var t=Ne(),e=ke(),n=xe();function r(t){return"missing required '"+t.name+"'"}return Tt}function Pt(){if(Rt)return Mt;Rt=1,Mt=function(t){var o=e.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=t.oneofsArray,a={};s.length&&o("var p={}");for(var u=0;u<t.fieldsArray.length;++u){var l=t._fieldsArray[u].resolve(),c="m"+e.safeProp(l.name);if(l.optional&&o("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)o("if(!util.isObject(%s))",c)("return%j",n(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),i(o,l,"k[i]"),r(o,l,u,c+"[k[i]]")("}");else if(l.repeated)o("if(!Array.isArray(%s))",c)("return%j",n(l,"array"))("for(var i=0;i<%s.length;++i){",c),r(o,l,u,c+"[i]")("}");else{if(l.partOf){var f=e.safeProp(l.partOf.name);1===a[l.partOf.name]&&o("if(p%s===1)",f)("return%j",l.partOf.name+": multiple values"),a[l.partOf.name]=1,o("p%s=1",f)}r(o,l,u,c)}l.optional&&o("}")}return o("return null")};var t=Ne(),e=xe();function n(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function r(e,r,i,o){if(r.resolvedType)if(r.resolvedType instanceof t){e("switch(%s){",o)("default:")("return%j",n(r,"enum value"));for(var s=Object.keys(r.resolvedType.values),a=0;a<s.length;++a)e("case %i:",r.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,o)("if(e)")("return%j+e",r.name+".")("}");else switch(r.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",n(r,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",n(r,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",n(r,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",n(r,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",n(r,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",n(r,"buffer"))}return e}function i(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",n(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",n(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",n(e,"boolean key"))}return t}return Mt}var qt={},Vt;function Ut(){return Vt||(Vt=1,function(t){var e=t,n=Ne(),r=xe();function i(t,e,r,i){var o=!1;if(e.resolvedType)if(e.resolvedType instanceof n){t("switch(d%s){",i);for(var s=e.resolvedType.values,a=Object.keys(s),u=0;u<a.length;++u)s[a[u]]!==e.typeDefault||o||(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',i,i,i),e.repeated||t("break"),o=!0),t("case%j:",a[u])("case %i:",s[a[u]])("m%s=%j",i,s[a[u]])("break");t("}")}else t('if(typeof d%s!=="object")',i)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,r,i);else{var l=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",i,i);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case"bytes":t('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length >= 0)",i)("m%s=d%s",i,i);break;case"string":t("m%s=String(d%s)",i,i);break;case"bool":t("m%s=Boolean(d%s)",i,i)}}return t}function o(t,e,r,i){if(e.resolvedType)e.resolvedType instanceof n?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",i,r,i,i,r,i,i):t("d%s=types[%i].toObject(m%s,o)",i,r,i);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,o?"true":"",i);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:t("d%s=m%s",i,i)}}return t}e.fromObject=function(t){var e=t.fieldsArray,o=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return o("return new this.ctor");o("var m=new this.ctor");for(var s=0;s<e.length;++s){var a=e[s].resolve(),u=r.safeProp(a.name);a.map?(o("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),i(o,a,s,u+"[ks[i]]")("}")("}")):a.repeated?(o("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),i(o,a,s,u+"[i]")("}")("}")):(a.resolvedType instanceof n||o("if(d%s!=null){",u),i(o,a,s,u),a.resolvedType instanceof n||o("}"))}return o("return m")},e.toObject=function(t){var e=t.fieldsArray.slice().sort(r.compareFieldsById);if(!e.length)return r.codegen()("return {}");for(var i=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],a=[],u=[],l=0;l<e.length;++l)e[l].partOf||(e[l].resolve().repeated?s:e[l].map?a:u).push(e[l]);if(s.length){for(i("if(o.arrays||o.defaults){"),l=0;l<s.length;++l)i("d%s=[]",r.safeProp(s[l].name));i("}")}if(a.length){for(i("if(o.objects||o.defaults){"),l=0;l<a.length;++l)i("d%s={}",r.safeProp(a[l].name));i("}")}if(u.length){for(i("if(o.defaults){"),l=0;l<u.length;++l){var c=u[l],f=r.safeProp(c.name);if(c.resolvedType instanceof n)i("d%s=o.enums===String?%j:%j",f,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",f,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")}else i("d%s=%j",f,c.typeDefault)}i("}")}var d=!1;for(l=0;l<e.length;++l){c=e[l];var p=t._fieldsArray.indexOf(c);f=r.safeProp(c.name);c.map?(d||(d=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),o(i,c,p,f+"[ks2[j]]")("}")):c.repeated?(i("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),o(i,c,p,f+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",f,c.name),o(i,c,p,f),c.partOf&&i("if(o.oneofs)")("d%s=%j",r.safeProp(c.partOf.name),c.name)),i("}")}return i("return d")}}(qt)),qt}var Jt={},Ht,Xt,Wt,Yt,Gt,Kt,Zt,Qt,te,ee,ne,re,ie,oe,se,ae,ue,le,ce,fe,he,de,pe,ye,ve,me,ge;function we(){return Ht||(Ht=1,function(t){var e=t,n=Ft();e[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),n=this.lookup(e);if(n){var r="."===t["@type"].charAt(0)?t["@type"].slice(1):t["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="",i="";if(e&&e.json&&t.type_url&&t.value){i=t.type_url.substring(t.type_url.lastIndexOf("/")+1),r=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var o=this.lookup(i);o&&(t=o.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var s=t.$type.toObject(t,e);return""===r&&(r="type.googleapis.com/"),i=r+("."===t.$type.fullName[0]?t.$type.fullName.slice(1):t.$type.fullName),s["@type"]=i,s}return this.toObject(t,e)}}}(Jt)),Jt}function be(){if(Wt)return Xt;Wt=1,Xt=y;var t=Ct();((y.prototype=Object.create(t.prototype)).constructor=y).className="Type";var e=Ne(),n=Ae(),r=Oe(),i=Bt(),o=zt(),s=Ft(),a=K(),u=Y(),l=xe(),c=je(),f=Dt(),h=Pt(),d=Ut(),p=we();function y(e,n){t.call(this,e,n),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}return Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var n=this.fields[t[e]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=l.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=l.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof s||((t.prototype=new s).constructor=t,l.merge(t.prototype,e)),t.$type=t.prototype.$type=this,l.merge(t,s,!0),this._ctor=t;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:l.oneOfGetter(this._oneofsArray[n].oneof),set:l.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(t.prototype,r)}}}),y.generateConstructor=function(t){for(var e,n=l.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(e=t._fieldsArray[r]).map?n("this%s={}",l.safeProp(e.name)):e.repeated&&n("this%s=[]",l.safeProp(e.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(s,a){var u=new y(s,a.options);u.extensions=a.extensions,u.reserved=a.reserved;for(var l=Object.keys(a.fields),c=0;c<l.length;++c)u.add((void 0!==a.fields[l[c]].keyType?i.fromJSON:r.fromJSON)(l[c],a.fields[l[c]]));if(a.oneofs)for(l=Object.keys(a.oneofs),c=0;c<l.length;++c)u.add(n.fromJSON(l[c],a.oneofs[l[c]]));if(a.nested)for(l=Object.keys(a.nested),c=0;c<l.length;++c){var f=a.nested[l[c]];u.add((void 0!==f.id?r.fromJSON:void 0!==f.fields?y.fromJSON:void 0!==f.values?e.fromJSON:void 0!==f.methods?o.fromJSON:t.fromJSON)(l[c],f))}return a.extensions&&a.extensions.length&&(u.extensions=a.extensions),a.reserved&&a.reserved.length&&(u.reserved=a.reserved),a.group&&(u.group=!0),a.comment&&(u.comment=a.comment),a.edition&&(u._edition=a.edition),u._defaultEdition="proto3",u},y.prototype.toJSON=function(e){var n=t.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return l.toObject(["edition",this._editionToJSON(),"options",n&&n.options||void 0,"oneofs",t.arrayToJSON(this.oneofsArray,e),"fields",t.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",n&&n.nested||void 0,"comment",r?this.comment:void 0])},y.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;t.prototype.resolveAll.call(this);var e=this.oneofsArray;for(r=0;r<e.length;)e[r++].resolve();for(var n=this.fieldsArray,r=0;r<n.length;)n[r++].resolve();return this},y.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,t.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)}),this):this},y.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof r&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof n?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):t.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof r&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof n){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return t.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return t.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return t.isReservedName(this.reserved,e)},y.prototype.create=function(t){return new this.ctor(t)},y.prototype.setup=function(){for(var t=this.fullName,e=[],n=0;n<this.fieldsArray.length;++n)e.push(this._fieldsArray[n].resolve().resolvedType);this.encode=c(this)({Writer:u,types:e,util:l}),this.decode=f(this)({Reader:a,types:e,util:l}),this.verify=h(this)({types:e,util:l}),this.fromObject=d.fromObject(this)({types:e,util:l}),this.toObject=d.toObject(this)({types:e,util:l});var r=p[t];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(t,e){return this.setup().encode(t,e)},y.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},y.prototype.decode=function(t,e){return this.setup().decode(t,e)},y.prototype.decodeDelimited=function(t){return t instanceof a||(t=a.create(t)),this.decode(t,t.uint32())},y.prototype.verify=function(t){return this.setup().verify(t)},y.prototype.fromObject=function(t){return this.setup().fromObject(t)},y.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},y.d=function(t){return function(e){l.decorateType(e,t)}},Xt}function _e(){if(Gt)return Yt;Gt=1,Yt=u;var t=Ct();((u.prototype=Object.create(t.prototype)).constructor=u).className="Root";var e,n,r,i=Oe(),o=Ne(),s=Ae(),a=xe();function u(e){t.call(this,"",e),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function l(){}u.fromJSON=function(t,e){return e||(e=new u),t.options&&e.setOptions(t.options),e.addJSON(t.nested).resolveAll()},u.prototype.resolvePath=a.path.resolve,u.prototype.fetch=a.fetch,u.prototype.load=function t(e,i,o){"function"==typeof i&&(o=i,i=void 0);var s=this;if(!o)return a.asPromise(t,s,e,i);var u=o===l;function c(t,e){if(o){if(u)throw t;e&&e.resolveAll();var n=o;o=null,n(t,e)}}function f(t){var e=t.lastIndexOf("google/protobuf/");if(e>-1){var n=t.substring(e);if(n in r)return n}return null}function h(t,e){try{if(a.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),a.isString(e)){n.filename=t;var r,o=n(e,s,i),l=0;if(o.imports)for(;l<o.imports.length;++l)(r=f(o.imports[l])||s.resolvePath(t,o.imports[l]))&&d(r);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(r=f(o.weakImports[l])||s.resolvePath(t,o.weakImports[l]))&&d(r,!0)}else s.setOptions(e.options).addJSON(e.nested)}catch(t){c(t)}u||p||c(null,s)}function d(t,e){if(t=f(t)||t,!(s.files.indexOf(t)>-1))if(s.files.push(t),t in r)u?h(t,r[t]):(++p,setTimeout(function(){--p,h(t,r[t])}));else if(u){var n;try{n=a.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||c(t))}h(t,n)}else++p,s.fetch(t,function(n,r){--p,o&&(n?e?p||c(null,s):c(n):h(t,r))})}var p=0;a.isString(e)&&(e=[e]);for(var y,v=0;v<e.length;++v)(y=s.resolvePath("",e[v]))&&d(y);return u?(s.resolveAll(),s):(p||c(null,s),s)},u.prototype.loadSync=function(t,e){if(!a.isNode)throw Error("not supported");return this.load(t,e,l)},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return t.prototype.resolveAll.call(this)};var c=/^[A-Z]/;function f(t,e){var n=e.parent.lookup(e.extend);if(n){var r=new i(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.get(r.name)||(r.declaringField=e,e.extensionField=r,n.add(r)),!0}return!1}return u.prototype._handleAdd=function(t){if(t instanceof i)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof o)c.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof s)){if(t instanceof e)for(var n=0;n<this.deferred.length;)f(0,this.deferred[n])?this.deferred.splice(n,1):++n;for(var r=0;r<t.nestedArray.length;++r)this._handleAdd(t._nestedArray[r]);c.test(t.name)&&(t.parent[t.name]=t)}(t instanceof e||t instanceof o||t instanceof i)&&(this._fullyQualifiedObjects[t.fullName]=t)},u.prototype._handleRemove=function(e){if(e instanceof i){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var n=this.deferred.indexOf(e);n>-1&&this.deferred.splice(n,1)}}else if(e instanceof o)c.test(e.name)&&delete e.parent[e.name];else if(e instanceof t){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);c.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]},u._configure=function(t,i,o){e=t,n=i,r=o},Yt}function xe(){if(Kt)return ft.exports;Kt=1;var t,e,n=ft.exports=W(),r=ut();n.codegen=vt(),n.fetch=mt(),n.path=It(),n.fs=n.inquire("fs"),n.toArray=function(t){if(t){for(var e=Object.keys(t),n=new Array(e.length),r=0;r<e.length;)n[r]=t[e[r++]];return n}return[]},n.toObject=function(t){for(var e={},n=0;n<t.length;){var r=t[n++],i=t[n++];void 0!==i&&(e[r]=i)}return e};var i=/\\/g,o=/"/g;n.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},n.safeProp=function(t){return!/^[$\w_]+$/.test(t)||n.isReserved(t)?'["'+t.replace(i,"\\\\").replace(o,'\\"')+'"]':"."+t},n.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var s=/_([a-z])/g;n.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(s,function(t,e){return e.toUpperCase()})},n.compareFieldsById=function(t,e){return t.id-e.id},n.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(n.decorateRoot.remove(e.$type),e.$type.name=r,n.decorateRoot.add(e.$type)),e.$type;t||(t=be());var i=new t(r||e.name);return n.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var a=0;return n.decorateEnum=function(t){if(t.$type)return t.$type;e||(e=Ne());var r=new e("Enum"+a++,t);return n.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r},n.setProperty=function(t,e,n,r){if("object"!=typeof t)throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return function t(e,n,i){var o=n.shift();if("__proto__"===o||"prototype"===o)return e;if(n.length>0)e[o]=t(e[o]||{},n,i);else{var s=e[o];if(s&&r)return e;s&&(i=[].concat(s).concat(i)),e[o]=i}return e}(t,e=e.split("."),n)},Object.defineProperty(n,"decorateRoot",{get:function(){return r.decorated||(r.decorated=new(_e()))}}),ft.exports}function ke(){return Zt||(Zt=1,function(t){var e=t,n=xe(),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function i(t,e){var n=0,i={};for(e|=0;n<t.length;)i[r[n+e]]=t[n++];return i}e.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),e.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),e.long=i([0,0,0,1,1],7),e.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),e.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])}(ct)),ct}function Oe(){if(te)return Qt;te=1,Qt=s;var t=Ee();((s.prototype=Object.create(t.prototype)).constructor=s).className="Field";var e,n=Ne(),r=ke(),i=xe(),o=/^required|optional|repeated$/;function s(e,n,s,a,u,l,c){if(i.isObject(a)?(c=u,l=a,a=u=void 0):i.isObject(u)&&(c=l,l=u,u=void 0),t.call(this,e,l),!i.isInteger(n)||n<0)throw TypeError("id must be a non-negative integer");if(!i.isString(s))throw TypeError("type must be a string");if(void 0!==a&&!o.test(a=a.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==u&&!i.isString(u))throw TypeError("extend must be a string");"proto3_optional"===a&&(a="optional"),this.rule=a&&"optional"!==a?a:void 0,this.type=s,this.id=n,this.extend=u||void 0,this.repeated="repeated"===a,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!i.Long&&void 0!==r.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=c}return s.fromJSON=function(t,e){var n=new s(t,e.id,e.type,e.rule,e.extend,e.options,e.comment);return e.edition&&(n._edition=e.edition),n._defaultEdition="proto3",n},Object.defineProperty(s.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(s.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(s.prototype,"delimited",{get:function(){return this.resolvedType instanceof e&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(s.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(s.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),s.prototype.setOption=function(e,n,r){return t.prototype.setOption.call(this,e,n,r)},s.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=r.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof e?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=i.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var o;i.base64.test(this.typeDefault)?i.base64.decode(this.typeDefault,o=i.newBuffer(i.base64.length(this.typeDefault)),0):i.utf8.write(this.typeDefault,o=i.newBuffer(i.utf8.length(this.typeDefault)),0),this.typeDefault=o}return this.map?this.defaultValue=i.emptyObject:this.repeated?this.defaultValue=i.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof e&&(this.parent.ctor.prototype[this.name]=this.defaultValue),t.prototype.resolve.call(this)},s.prototype._inferLegacyProtoFeatures=function(t){if("proto2"!==t&&"proto3"!==t)return{};var n={};if("required"===this.rule&&(n.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===r.defaults[this.type]){var i=this.parent.get(this.type.split(".").pop());i&&i instanceof e&&i.group&&(n.message_encoding="DELIMITED")}return!0===this.getOption("packed")?n.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&(n.repeated_field_encoding="EXPANDED"),n},s.prototype._resolveFeatures=function(e){return t.prototype._resolveFeatures.call(this,this._edition||e)},s.d=function(t,e,n,r){return"function"==typeof e?e=i.decorateType(e).name:e&&"object"==typeof e&&(e=i.decorateEnum(e).name),function(o,a){i.decorateType(o.constructor).add(new s(a,t,e,n,{default:r}))}},s._configure=function(t){e=t},Qt}function Ae(){if(ne)return ee;ne=1,ee=r;var t=Ee();((r.prototype=Object.create(t.prototype)).constructor=r).className="OneOf";var e=Oe(),n=xe();function r(e,n,r,i){if(Array.isArray(n)||(r=n,n=void 0),t.call(this,e,r),void 0!==n&&!Array.isArray(n))throw TypeError("fieldNames must be an Array");this.oneof=n||[],this.fieldsArray=[],this.comment=i}function i(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}return r.fromJSON=function(t,e){return new r(t,e.oneof,e.options,e.comment)},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},r.prototype.add=function(t){if(!(t instanceof e))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,i(this),this},r.prototype.remove=function(t){if(!(t instanceof e))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(t);if(n<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(n,1),(n=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(n,1),t.partOf=null,this},r.prototype.onAdd=function(e){t.prototype.onAdd.call(this,e);for(var n=0;n<this.oneof.length;++n){var r=e.get(this.oneof[n]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}i(this)},r.prototype.onRemove=function(e){for(var n,r=0;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);t.prototype.onRemove.call(this,e)},Object.defineProperty(r.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var t=this.fieldsArray[0];return null!=t.options&&!0===t.options.proto3_optional}}),r.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,i){n.decorateType(e.constructor).add(new r(i,t)),Object.defineProperty(e,i,{get:n.oneOfGetter(t),set:n.oneOfSetter(t)})}},ee}function Ee(){if(ie)return re;ie=1,re=s,s.className="ReflectionObject";const t=Ae();var e,n=xe(),r={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},i={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},o={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function s(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(s.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var n=t.root;n instanceof e&&n._handleAdd(this)},s.prototype.onRemove=function(t){var n=t.root;n instanceof e&&n._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof e&&(this.resolved=!0),this},s.prototype._resolveFeaturesRecursive=function(t){return this._resolveFeatures(this._edition||t)},s.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var n={};if(!e)throw new Error("Unknown edition for "+this.fullName);var s=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if("proto2"===e)n=Object.assign({},i);else if("proto3"===e)n=Object.assign({},o);else{if("2023"!==e)throw new Error("Unknown edition: "+e);n=Object.assign({},r)}return this._features=Object.assign(n,s||{}),void(this._featuresResolved=!0)}if(this.partOf instanceof t){var a=Object.assign({},this.partOf._features);this._features=Object.assign(a,s||{})}else if(this.declaringField);else{if(!this.parent)throw new Error("Unable to find a parent for "+this.fullName);var u=Object.assign({},this.parent._features);this._features=Object.assign(u,s||{})}this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},s.prototype._inferLegacyProtoFeatures=function(){return{}},s.prototype.getOption=function(t){if(this.options)return this.options[t]},s.prototype.setOption=function(t,e,r){return this.options||(this.options={}),/^features\./.test(t)?n.setProperty(this.options,t,e,r):r&&void 0!==this.options[t]||(this.getOption(t)!==e&&(this.resolved=!1),this.options[t]=e),this},s.prototype.setParsedOption=function(t,e,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var o=i.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)});if(o){var s=o[t];n.setProperty(s,r,e)}else(o={})[t]=n.setProperty({},r,e),i.push(o)}else{var a={};a[t]=e,i.push(a)}return this},s.prototype.setOptions=function(t,e){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)this.setOption(n[r],t[n[r]],e);return this},s.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},s.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},s._configure=function(t){e=t},re}function Ne(){if(se)return oe;se=1,oe=r;var t=Ee();((r.prototype=Object.create(t.prototype)).constructor=r).className="Enum";var e=Ct(),n=xe();function r(e,n,r,i,o,s){if(t.call(this,e,r),n&&"object"!=typeof n)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,n)for(var a=Object.keys(n),u=0;u<a.length;++u)"number"==typeof n[a[u]]&&(this.valuesById[this.values[a[u]]=n[a[u]]]=a[u])}return r.prototype._resolveFeatures=function(e){return e=this._edition||e,t.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(t=>{var e=Object.assign({},this._features);this._valuesFeatures[t]=Object.assign(e,this.valuesOptions&&this.valuesOptions[t]&&this.valuesOptions[t].features)}),this},r.fromJSON=function(t,e){var n=new r(t,e.values,e.options,e.comment,e.comments);return n.reserved=e.reserved,e.edition&&(n._edition=e.edition),n._defaultEdition="proto3",n},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},r.prototype.add=function(t,e,r,i){if(!n.isString(t))throw TypeError("name must be a string");if(!n.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return i&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[t]=i||null),this.comments[t]=r||null,this},r.prototype.remove=function(t){if(!n.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this},r.prototype.isReservedId=function(t){return e.isReservedId(this.reserved,t)},r.prototype.isReservedName=function(t){return e.isReservedName(this.reserved,t)},oe}function je(){if(ue)return ae;ue=1,ae=function(i){for(var o,s=n.codegen(["m","w"],i.name+"$encode")("if(!w)")("w=Writer.create()"),a=i.fieldsArray.slice().sort(n.compareFieldsById),u=0;u<a.length;++u){var l=a[u].resolve(),c=i._fieldsArray.indexOf(l),f=l.resolvedType instanceof t?"int32":l.type,h=e.basic[f];o="m"+n.safeProp(l.name),l.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|e.mapKey[l.keyType],l.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,o):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,f,o),s("}")("}")):l.repeated?(s("if(%s!=null&&%s.length){",o,o),l.packed&&void 0!==e.packed[f]?s("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",f,o)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",o),void 0===h?r(s,l,c,o+"[i]"):s("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,f,o)),s("}")):(l.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,l.name),void 0===h?r(s,l,c,o):s("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,f,o))}return s("return w")};var t=Ne(),e=ke(),n=xe();function r(t,e,n,r){return e.delimited?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(e.id<<3|2)>>>0)}return ae}function Se(){if(le)return h.exports;le=1;var t=h.exports=lt();return t.build="light",t.load=function(e,n,r){return"function"==typeof n?(r=n,n=new t.Root):n||(n=new t.Root),n.load(e,r)},t.loadSync=function(e,n){return n||(n=new t.Root),n.loadSync(e)},t.encoder=je(),t.decoder=Dt(),t.verifier=Pt(),t.converter=Ut(),t.ReflectionObject=Ee(),t.Namespace=Ct(),t.Root=_e(),t.Enum=Ne(),t.Type=be(),t.Field=Oe(),t.OneOf=Ae(),t.MapField=Bt(),t.Service=zt(),t.Method=Lt(),t.Message=Ft(),t.wrappers=we(),t.types=ke(),t.util=xe(),t.ReflectionObject._configure(t.Root),t.Namespace._configure(t.Type,t.Service,t.Enum),t.Root._configure(t.Type),t.Field._configure(t.Type),h.exports}function Te(){if(fe)return ce;fe=1,ce=c;var t=/[\s{}=;:[\],'"()<>]/g,e=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,r=/^ *[*/]+ */,i=/^\s*\*?\/*/,o=/\n/g,s=/\s/,a=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function l(t){return t.replace(a,function(t,e){switch(e){case"\\":case"":return e;default:return u[e]||""}})}function c(a,u){a=a.toString();var c=0,f=a.length,h=1,d=0,p={},y=[],v=null;function m(t){return Error("illegal "+t+" (line "+h+")")}function g(t){return a.charAt(t)}function w(t,e,n){var s,l={type:a.charAt(t++),lineEmpty:!1,leading:n},c=t-(u?2:3);do{if(--c<0||"\n"===(s=a.charAt(c))){l.lineEmpty=!0;break}}while(" "===s||"\t"===s);for(var f=a.substring(t,e).split(o),y=0;y<f.length;++y)f[y]=f[y].replace(u?i:r,"").trim();l.text=f.join("\n").trim(),p[h]=l,d=h}function b(t){var e=_(t),n=a.substring(t,e);return/^\s*\/\//.test(n)}function _(t){for(var e=t;e<f&&"\n"!==g(e);)e++;return e}function x(){if(y.length>0)return y.shift();if(v)return function(){var t="'"===v?n:e;t.lastIndex=c-1;var r=t.exec(a);if(!r)throw m("string");return c=t.lastIndex,k(v),v=null,l(r[1])}();var r,i,o,d,p,x=0===c;do{if(c===f)return null;for(r=!1;s.test(o=g(c));)if("\n"===o&&(x=!0,++h),++c===f)return null;if("/"===g(c)){if(++c===f)throw m("comment");if("/"===g(c))if(u){if(d=c,p=!1,b(c-1)){p=!0;do{if((c=_(c))===f)break;if(c++,!x)break}while(b(c))}else c=Math.min(f,_(c)+1);p&&(w(d,c,x),x=!0),h++,r=!0}else{for(p="/"===g(d=c+1);"\n"!==g(++c);)if(c===f)return null;++c,p&&(w(d,c-1,x),x=!0),++h,r=!0}else{if("*"!==(o=g(c)))return"/";d=c+1,p=u||"*"===g(d);do{if("\n"===o&&++h,++c===f)throw m("comment");i=o,o=g(c)}while("*"!==i||"/"!==o);++c,p&&(w(d,c-2,x),x=!0),r=!0}}}while(r);var O=c;if(t.lastIndex=0,!t.test(g(O++)))for(;O<f&&!t.test(g(O));)++O;var A=a.substring(c,c=O);return'"'!==A&&"'"!==A||(v=A),A}function k(t){y.push(t)}function O(){if(!y.length){var t=x();if(null===t)return null;k(t)}return y[0]}return Object.defineProperty({next:x,peek:O,push:k,skip:function(t,e){var n=O();if(n===t)return x(),!0;if(!e)throw m("token '"+n+"', '"+t+"' expected");return!1},cmnt:function(t){var e,n=null;return void 0===t?(e=p[h-1],delete p[h-1],e&&(u||"*"===e.type||e.lineEmpty)&&(n=e.leading?e.text:null)):(d<t&&O(),e=p[t],delete p[t],!e||e.lineEmpty||!u&&"/"!==e.type||(n=e.leading?null:e.text)),n}},"line",{get:function(){return h}})}return c.unescape=l,ce}function $e(){if(de)return he;de=1,he=_,_.filename=null,_.defaults={keepCase:!1};var t=Te(),e=_e(),n=be(),r=Oe(),i=Bt(),o=Ae(),s=Ne(),a=zt(),u=Lt(),l=Ee(),c=ke(),f=xe(),h=/^[1-9][0-9]*$/,d=/^-?[1-9][0-9]*$/,p=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,m=/^-?0[0-7]+$/,g=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,b=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function _(x,k,O){k instanceof e||(O=k,k=new e),O||(O=_.defaults);var A,E,N,j,S=O.preferTrailingComment||!1,T=t(x,O.alternateCommentMode||!1),$=T.next,M=T.push,R=T.peek,I=T.skip,C=T.cmnt,B=!0,L="proto2",z=k,F=[],D={},P=O.keepCase?function(t){return t}:f.camelCase;function q(t,e,n){var r=_.filename;return n||(_.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(r?r+", ":"")+"line "+T.line+")")}function V(){var t,e=[];do{if('"'!==(t=$())&&"'"!==t)throw q(t);e.push($()),I(t),t=R()}while('"'===t||"'"===t);return e.join("")}function U(t){var e=$();switch(e){case"'":case'"':return M(e),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(t,e){var n=1;"-"===t.charAt(0)&&(n=-1,t=t.substring(1));switch(t){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(h.test(t))return n*parseInt(t,10);if(p.test(t))return n*parseInt(t,16);if(v.test(t))return n*parseInt(t,8);if(g.test(t))return n*parseFloat(t);throw q(t,"number",e)}(e,!0)}catch(t){if(b.test(e))return e;throw q(e,"value")}}function J(t,e){var n,r;do{if(!e||'"'!==(n=R())&&"'"!==n)try{t.push([r=H($()),I("to",!0)?H($()):r])}catch(r){if(!(e&&b.test(n)&&L>=2023))throw r;t.push(n)}else{var i=V();if(t.push(i),L>=2023)throw q(i,"id")}}while(I(",",!0));var o={options:void 0,setOption:function(t,e){void 0===this.options&&(this.options={}),this.options[t]=e}};Z(o,function(t){if("option"!==t)throw q(t);nt(o,t),I(";")},function(){ot(o)})}function H(t,e){switch(t){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!e&&"-"===t.charAt(0))throw q(t,"id");if(d.test(t))return parseInt(t,10);if(y.test(t))return parseInt(t,16);if(m.test(t))return parseInt(t,8);throw q(t,"id")}function X(){if(void 0!==A)throw q("package");if(A=$(),!b.test(A))throw q(A,"name");z=z.define(A),I(";")}function W(){var t,e=R();switch(e){case"weak":t=N||(N=[]),$();break;case"public":$();default:t=E||(E=[])}e=V(),I(";"),t.push(e)}function Y(){if(I("="),(L=V())<2023)throw q(L,"syntax");I(";")}function G(){I("="),L=V();if(!["2023"].includes(L))throw q(L,"edition");I(";")}function K(t,e){switch(e){case"option":return nt(t,e),I(";"),!0;case"message":return Q(t,e),!0;case"enum":return et(t,e),!0;case"service":return function(t,e){if(!w.test(e=$()))throw q(e,"service name");var n=new a(e);Z(n,function(t){if(!K(n,t)){if("rpc"!==t)throw q(t);!function(t,e){var n=C(),r=e;if(!w.test(e=$()))throw q(e,"name");var i,o,s,a,l=e;I("("),I("stream",!0)&&(o=!0);if(!b.test(e=$()))throw q(e);i=e,I(")"),I("returns"),I("("),I("stream",!0)&&(a=!0);if(!b.test(e=$()))throw q(e);s=e,I(")");var c=new u(l,r,i,s,o,a);c.comment=n,Z(c,function(t){if("option"!==t)throw q(t);nt(c,t),I(";")}),t.add(c)}(n,t)}}),t.add(n),t===z&&F.push(n)}(t,e),!0;case"extend":return function(t,e){if(!b.test(e=$()))throw q(e,"reference");var n=e;Z(null,function(e){switch(e){case"required":case"repeated":tt(t,e,n);break;case"optional":tt(t,"proto3"===L?"proto3_optional":"optional",n);break;default:if("proto2"===L||!b.test(e))throw q(e);M(e),tt(t,"optional",n)}})}(t,e),!0}return!1}function Z(t,e,n){var r=T.line;if(t&&("string"!=typeof t.comment&&(t.comment=C()),t.filename=_.filename),I("{",!0)){for(var i;"}"!==(i=$());)e(i);I(";",!0)}else n&&n(),I(";"),t&&("string"!=typeof t.comment||S)&&(t.comment=C(r)||t.comment)}function Q(t,e){if(!w.test(e=$()))throw q(e,"type name");var r=new n(e);Z(r,function(t){if(!K(r,t))switch(t){case"map":!function(t){I("<");var e=$();if(void 0===c.mapKey[e])throw q(e,"type");I(",");var n=$();if(!b.test(n))throw q(n,"type");I(">");var r=$();if(!w.test(r))throw q(r,"name");I("=");var o=new i(P(r),H($()),e,n);Z(o,function(t){if("option"!==t)throw q(t);nt(o,t),I(";")},function(){ot(o)}),t.add(o)}(r);break;case"required":if("proto2"!==L)throw q(t);case"repeated":tt(r,t);break;case"optional":if("proto3"===L)tt(r,"proto3_optional");else{if("proto2"!==L)throw q(t);tt(r,"optional")}break;case"oneof":!function(t,e){if(!w.test(e=$()))throw q(e,"name");var n=new o(P(e));Z(n,function(t){"option"===t?(nt(n,t),I(";")):(M(t),tt(n,"optional"))}),t.add(n)}(r,t);break;case"extensions":J(r.extensions||(r.extensions=[]));break;case"reserved":J(r.reserved||(r.reserved=[]),!0);break;default:if("proto2"===L||!b.test(t))throw q(t);M(t),tt(r,"optional")}}),t.add(r),t===z&&F.push(r)}function tt(t,e,i){var s=$();if("group"!==s){for(;s.endsWith(".")||R().startsWith(".");)s+=$();if(!b.test(s))throw q(s,"type");var a=$();if(!w.test(a))throw q(a,"name");a=P(a),I("=");var u=new r(a,H($()),s,e,i);if(Z(u,function(t){if("option"!==t)throw q(t);nt(u,t),I(";")},function(){ot(u)}),"proto3_optional"===e){var l=new o("_"+a);u.setOption("proto3_optional",!0),l.add(u),t.add(l)}else t.add(u);t===z&&F.push(u)}else!function(t,e){if(L>=2023)throw q("group");var i=$();if(!w.test(i))throw q(i,"name");var o=f.lcFirst(i);i===o&&(i=f.ucFirst(i));I("=");var s=H($()),a=new n(i);a.group=!0;var u=new r(o,s,i,e);u.filename=_.filename,Z(a,function(t){switch(t){case"option":nt(a,t),I(";");break;case"required":case"repeated":tt(a,t);break;case"optional":tt(a,"proto3"===L?"proto3_optional":"optional");break;case"message":Q(a,t);break;case"enum":et(a,t);break;case"reserved":J(a.reserved||(a.reserved=[]),!0);break;default:throw q(t)}}),t.add(a).add(u)}(t,e)}function et(t,e){if(!w.test(e=$()))throw q(e,"name");var n=new s(e);Z(n,function(t){switch(t){case"option":nt(n,t),I(";");break;case"reserved":J(n.reserved||(n.reserved=[]),!0),void 0===n.reserved&&(n.reserved=[]);break;default:!function(t,e){if(!w.test(e))throw q(e,"name");I("=");var n=H($(),!0),r={options:void 0,getOption:function(t){return this.options[t]}};r.setOption=function(t,e){l.prototype.setOption.call(r,t,e)},r.setParsedOption=function(){},Z(r,function(t){if("option"!==t)throw q(t);nt(r,t),I(";")},function(){ot(r)}),t.add(e,n,r.comment,r.parsedOptions||r.options)}(n,t)}}),t.add(n),t===z&&F.push(n)}function nt(t,e){var n,r,i=!0;for("option"===e&&(e=$());"="!==e;){if("("===e){var o=$();I(")"),e="("+o+")"}if(i){if(i=!1,e.includes(".")&&!e.includes("(")){var s=e.split(".");n=s[0]+".",e=s[1];continue}n=e}else r=r?r+=e:e;e=$()}var a=rt(t,r?n.concat(r):n);r=r&&"."===r[0]?r.slice(1):r,function(t,e,n,r){t.setParsedOption&&t.setParsedOption(e,n,r)}(t,n=n&&"."===n[n.length-1]?n.slice(0,-1):n,a,r)}function rt(t,e){if(I("{",!0)){for(var n={};!I("}",!0);){if(!w.test(j=$()))throw q(j,"name");if(null===j)throw q(j,"end of input");var r,i=j;if(I(":",!0),"{"===R())r=rt(t,e+"."+j);else if("["===R()){var o;if(r=[],I("[",!0)){do{o=U(),r.push(o)}while(I(",",!0));I("]"),void 0!==o&&it(t,e+"."+j,o)}}else r=U(),it(t,e+"."+j,r);var s=n[i];s&&(r=[].concat(s).concat(r)),n[i]=r,I(",",!0),I(";",!0)}return n}var a=U();return it(t,e,a),a}function it(t,e,n){z===t&&/^features\./.test(e)?D[e]=n:t.setOption&&t.setOption(e,n)}function ot(t){if(I("[",!0)){do{nt(t,"option")}while(I(",",!0));I("]")}return t}for(;null!==(j=$());)switch(j){case"package":if(!B)throw q(j);X();break;case"import":if(!B)throw q(j);W();break;case"syntax":if(!B)throw q(j);Y();break;case"edition":if(!B)throw q(j);G();break;case"option":nt(z,j),I(";",!0);break;default:if(K(z,j)){B=!1;continue}throw q(j)}return F.forEach(t=>{t._edition=L,Object.keys(D).forEach(e=>{void 0===t.getOption(e)&&t.setOption(e,D[e],!0)})}),_.filename=null,{package:A,imports:E,weakImports:N,root:k}}return he}function Me(){if(ye)return pe;ye=1,pe=n;var t,e=/\/|\./;function n(t,r){e.test(t)||(t="google/protobuf/"+t+".proto",r={nested:{google:{nested:{protobuf:{nested:r}}}}}),n[t]=r}return n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(t){return n[t]||null},pe}function Re(){if(ve)return f.exports;ve=1;var t=f.exports=Se();return t.build="full",t.tokenize=Te(),t.parse=$e(),t.common=Me(),t.Root._configure(t.Type,t.parse,t.common),f.exports}function Ie(){return ge?me:(ge=1,me=Re())}var Ce=Ie();async function Be(t){const e=await fetch(t||"map.bin");if(!e.ok)throw new Error("Failed to fetch graph data.");const n=Ce.parse('syntax="proto3";package dn42_map;message Node{uint32 asn=1;string desc=2;repeated Route routes=3;Centrality centrality=4;}message Centrality{double degree=1;double betweenness=2;double closeness=3;uint32 index=4;uint32 ranking=5;}message Route{uint32 length=1;oneof ip{uint32 ipv4=2;IPv6 ipv6=3;}}message IPv6{uint32 high_h32=1;uint32 high_l32=2;uint32 low_h32=3;uint32 low_l32=4;}message Link{uint32 source=1;uint32 target=2;}message Metadata{string vendor=1;uint64 generated_timestamp=2;uint64 data_timestamp=3;}message Graph{Metadata metadata=1;repeated Node nodes=2;repeated Link links=3;}',{keepCase:!0}).root.lookupType("dn42_map.Graph"),r=n.toObject(n.decode(new Uint8Array(await e.arrayBuffer())));if(r.metadata.vendor!==l.binVendorMagic)throw new Error("Invalid response or map provider.");return r}async function Le(t){const e=await fetch(`${l.dn42.whoisApi}${t}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw new Error("Network status code error.");const n=await e.json();if(!n.whois)throw new Error("Network response error.");return n.whois}async function ze(){const t=await fetch(l.dn42.myIpApi,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!t.ok)throw new Error("Failed to fetch myip data.");const e=await t.json();if(!e.ip)throw new Error("Network response error.");return e}async function Fe(){const t=await fetch(`${l.dn42.timeMachineBinUrlPrefix}/index.json`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!t.ok)throw new Error("Failed to fetch map versions.");return await t.json()}function De(t){let e=t.split(":");e=e.map(t=>t.replace(/^0+/,"")||"0");let n=-1,r=0,i=-1,o=0;if(e.forEach((t,e)=>{"0"===t?-1===i?(i=e,o=1):o++:(o>r&&(n=i,r=o),i=-1,o=0)}),o>r&&(n=i,r=o),r<2)return e.join(":");const s=e.slice(0,n),a=e.slice(n+r);let u="";return s.length>0&&(u+=s.join(":")),u+="::",a.length>0&&(u+=a.join(":")),u}function Pe(t,e,n,r){const i=((t=BigInt(t||0))<<32n|(e=BigInt(e||0)))<<64n|((n=BigInt(n||0))<<32n|(r=BigInt(r||0))),o=[];for(let t=0;t<8;t++){const e=i>>112n-16n*BigInt(t)&0xFFFFn;o.push(e.toString(16).padStart(4,"0"))}return De(o.join(":"))}const qe=t=>[t>>24&255,t>>16&255,t>>8&255,255&t].join(".");function Ve(t,e,n){const[r,i]=t,[o,s]=e,a=(n-r)/(i-r);return o+Math.sqrt(a)*(s-o)}let Ue,Je=!1;const He=t=>{Ue=t},Xe=()=>Je,We=t=>{Je=t},Ye=()=>Ue,Ge=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t.apply(null,r),e)}},Ke=(t,e)=>{let n=!1;return(...r)=>{n||(t.apply(null,r),n=!0,setTimeout(()=>n=!1,e))}},Ze=(t,e)=>`\n    <div class="table-search-container">\n      <input type="text" \n             id="table-search" \n             placeholder="${t}" \n             oninput="${e}">\n    </div>\n  `,Qe=(t,e,n=[])=>{const r=document.querySelector(e);if(!r)return;const i=r.querySelector("tbody").querySelectorAll("tr"),o=t.toLowerCase().trim();o?i.forEach(t=>{let e=!1;const r=n.length>0?n.map(e=>t.cells[e]).filter(t=>t):Array.from(t.cells);for(const t of r){if(t.textContent.toLowerCase().includes(o)){e=!0;break}}t.style.display=e?"":"none"}):i.forEach(t=>t.style.display="")},tn=Ge(t=>{Qe(t,".ranking-table",[1,2])},150),en=Ge(t=>{Qe(t,".neighbors-table",[0,1])},150);let nn=-1,rn=!0;const on=(t,e="string")=>{const n=document.querySelector("table.sortable thead"),r=document.querySelector("table.sortable tbody"),i=Array.from(r.querySelectorAll("tr")),o=n.querySelectorAll("th");o.forEach(t=>t.classList.remove("sort-asc","sort-desc")),nn===t?rn=!rn:(nn=t,rn=!0),o[t].classList.add(rn?"sort-asc":"sort-desc"),i.sort((n,r)=>{const i=n.cells[t].textContent.trim(),o=r.cells[t].textContent.trim();return"number"===e?(Number(i)-Number(o))*(rn?1:-1):i.localeCompare(o)*(rn?1:-1)}),i.forEach(t=>r.appendChild(t))},sn=()=>{nn=-1},an=t=>`\n    <div class="centrality">\n      <div class="param">\n        <div>Betweenness <strong>${t.centrality.betweenness.toFixed(5)}</strong></div>\n        <div>Closeness <strong>${t.centrality.closeness.toFixed(5)}</strong></div>\n        <div>Degree <strong>${t.centrality.degree}</strong></div>\n      </div>\n      <div class="index">\n        <span>Map.dn42 Index</span>\n        <strong>${t.centrality.index}</strong>\n      </div>\n      <div class="rank">\n        <span>Rank</span>\n        <strong># ${t.centrality.ranking}</strong>\n      </div>\n    </div>\n  `,un=t=>{const e=t.routes.map(t=>`\n    <tr>\n      <td class="mono">${t}</td>\n      <td class="right">\n        <a href="${l.dn42.explorerUrl}${t.replace("/","_")}" target="_blank">Registry</a>&nbsp;&nbsp;\n        <a href="${l.dn42.routeGraphsUrl}?ip_prefix=${encodeURIComponent(t)}&asn=${l.dn42.routeGraphInitiateAsn}" target="_blank">Graph</a>&nbsp;&nbsp;\n        <a href="${l.dn42.queryRoutesUrl}${t}" target="_blank">Show</a>\n      </td>\n    </tr>\n  `).join("");return`\n    <p class="emphasized">Routes (${t.routes.length})</p>\n    <div class="whois">\n      <table>\n        <tbody>${e}</tbody>\n      </table>\n    </div>\n  `},ln=(t,e,n)=>{const r=[...t.peers].map(n=>{return`\n    <tr ${r=n,`onclick="javascript:window.navigateToNode(${r},true)"`}>\n      <td class="asn">${n}</td>\n      <td class="name">${e.nodeMap.get(n.toString())?.label||"-"}</td>\n      <td class="to">${e.linkMap.has(`${n}_${t.asn}`)?"✔":""}</td>\n      <td class="from">${e.linkMap.has(`${t.asn}_${n}`)?"✔":""}</td>\n    </tr>\n  `;var r}).join("");return`\n    <p class="emphasized">Neighbors (${t.peers.size})</p>\n    ${n}\n    <div class="whois">\n      <table class="sortable neighbors-table">\n        \n    <thead>\n      <tr>\n        <th class="key asn" onclick="javascript:window.sortTableByColumn(0,'number')">ASN</th>\n        <th class="key name" onclick="javascript:window.sortTableByColumn(1)">Name</th>\n        <th class="key to" onclick="javascript:window.sortTableByColumn(2)">To</th>\n        <th class="key from" onclick="javascript:window.sortTableByColumn(3)">From</th>\n      </tr>\n    </thead>\n  \n        <tbody>${r}</tbody>\n      </table>\n    </div>\n  `},cn=(t,e)=>{const n=t.sort((t,e)=>t.centrality.ranking-e.centrality.ranking).map((t,e)=>{return`\n      <tr ${n=t.asn,`onclick="javascript:window.navigateToNode(${n},true)"`}>\n        <td class="rank">${e+1}</td>\n        <td class="asn">${t.asn}</td>\n        <td class="name">${t.label||"-"}</td>\n        <td class="index">${t.centrality.index}</td>\n      </tr>\n    `;var n}).join("");return`\n    ${e}\n    <div class="whois">\n      <table class="sortable ranking-table">\n        \n    <thead>\n      <tr>\n        <th class="key rank" onclick="javascript:window.sortTableByColumn(0,'number')">Rank</th>\n        <th class="key asn" onclick="javascript:window.sortTableByColumn(1,'number')">ASN</th>\n        <th class="key name" onclick="javascript:window.sortTableByColumn(2)">Name</th>\n        <th class="key index" onclick="javascript:window.sortTableByColumn(3,'number')">Index</th>\n      </tr>\n    </thead>\n  \n        <tbody>${n}</tbody>\n      </table>\n    </div>\n  `},fn=(t,e)=>{const n=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,r=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,i=`<a href="${l.dn42.explorerUrl}${e}" target="_blank">Reveal in DN42 Registry Explorer</a><br/>`;let o='<div class="remarks">';const s=t.split("\n").map(t=>{const[e,i]=t.split(/:\x20(.+)?/,2);if(!e||!i)return"";const s=i.trim().replace(n,"<a href='$1$2' target='_blank'>$1$2</a>").replace(r,t=>`<a href="mailto:${t}">${t}</a>`);if("remarks"===e.trim()){if(!s)return"";const t=s.replace(/(<a\b[^>]*>.*?<\/a>)|\x20/g,(t,e)=>e||"&nbsp;");return o+=`<p>${t}</p>`,""}return`<tr><td class="key">${e.trim()}</td><td>${s}</td></tr>`}).join("");return o+="</div>",i+`<div class="whois"><table><tbody>${s}</tbody></table>${o}</div>`},hn={};let dn=!1;async function pn(t){const e=Ye();We(!0);const n=document.getElementById("sidebar"),r=document.getElementById("sidebar-content");t?await vn(t,e,n,r):await yn(e,n,r)}async function yn(t,e,n){document.getElementById("sidebar-title").innerText="Ranking";const r=Ze("Search by ASN or Name...","window.searchRankingTable(this.value)"),i=cn(t.nodes,r);n.innerHTML=i,e.style.left="0",e.scrollTop=0,window.searchRankingTable=tn,sn(),window.sortTableByColumn(0,"number")}async function vn(t,e,n,r){document.getElementById("sidebar-title").innerText=t.desc;const i=an(t),o=un(t),s=Ze("Search neighbors by ASN or Name...","window.searchNeighborsTable(this.value)"),a=ln(t,e,s);n.style.left="0";const u=hn[t.asn];if(u)return r.innerHTML=u,n.scrollTop=0,mn(),sn(),void window.sortTableByColumn(0,"number");r.innerHTML=i+"<p>Querying whois database...</p>"+o+a,n.scrollTop=0,mn();try{const n=await Le(t.asn),a=fn(n,t.asn),u=i+a+o+ln(t,e,s);hn[t.asn]=u,r.innerHTML=u,mn()}catch(t){console.error("Error querying whois API:",t),r.innerHTML=i+"<p>Error querying whois API.</p>"+o+a,mn()}sn(),window.sortTableByColumn(0,"number")}function mn(){window.searchNeighborsTable=en}function gn(){We(!1),dn=!1,document.getElementById("sidebar").style.left="-500px"}function wn(t){const e=(t,e,n,r=null)=>`\n      <a ${t?`href="${t}" target="_blank"`:""} ${r?`onclick="${r}"`:""} class="toolbar-icon" data-tooltip="${e}" aria-label="${e}">\n        <img src="assets/icons/${n}" alt="${e}" width="20" height="20">\n      </a>\n    `;document.getElementById("metadata").innerHTML=`\n    <div class="toolbar-icons">\n      ${e(l.dn42.homeUrl,"DN42 Home","dn42.svg")}\n      ${e(l.dn42.peerFinderUrl,"DN42 Ping Finder","peerfinder.svg")}\n      ${e(l.dn42.routeGraphsUrl,"Route Graph by highdef","routegraph.svg")}\n      ${e(l.dn42.toolboxUrl,"Tools by Kioubit","tools.svg")}\n      ${e(l.dn42.rawJsonApiUrl,"API Services","api.svg")}\n      ${e(null,"All active nodes and ranking","ranking.svg","javascript:window.toggleRanking()")}\n      ${e(null,`Time Machine (Date of current map: ${t})`,"time.svg","javascript:window.showMapVersions()")}\n    </div>\n  `}async function bn(){try{if(l.dn42.accessingFromDn42){const t=document.getElementById("myip"),e=await ze();let n="";e.country&&(n+=`<img src="assets/flags/${e.country.toLowerCase()}.svg" width="16" height="16" alt="${e.ip}"/>&nbsp;&nbsp;`),e.ip&&(n+=`<a href="${l.dn42.myIpUrl}" target="_blank">${e.ip}</a>&nbsp;/&nbsp;`),e.netname&&(n+=`${e.netname}&nbsp;`),e.origin&&(n+=`(<a onclick="javascript:window.navigateToNode(${Number(e.origin.replace("AS",""))},true)">${e.origin}</a>)`),t.innerHTML=n,t.style.display="flex"}}catch(t){console.error(`Failed to get source IP information. ${t}`);const e=document.getElementById("myip");e&&(e.style.display="none")}}function _n(t,e){const n=document.getElementById("tooltip");n&&(n.innerHTML=On(e),n.style.display="block",kn(t))}function xn(){const t=document.getElementById("tooltip");t&&(t.style.display="none")}function kn(t){const e=document.getElementById("tooltip"),n=t.clientX,r=t.clientY;e.style.left=`${n+10}px`,e.style.top=`${r+10}px`}function On(t){let e="",n="",r=t.desc;t.desc.includes("-DN42")?(e="DN42",r=t.desc.replace("-DN42","")):t.desc.includes("-NEONETWORK")?(e="NEONETWORK",r=t.desc.replace("-NEONETWORK","")):t.desc.includes("ICVPN-")?(e="ICVPN",r=t.desc.replace("ICVPN-","")):t.desc.includes("-CRXN")&&(e="CRXN",r=t.desc.replace("-CRXN","")),e&&(n=`<span class="tag">${e}</span>&nbsp;`);const i=`<div class="title">${n}<b>${r} (AS${t.asn})</b></div>`,o=`<p>Neighbors: ${t.peers.size}</p>`;let s="";const a=t.routes.map(t=>`<li>${t}</li>`).join("");return a&&(s=`<p>Advertised routes:</p><ul>${a}</ul>`),`<div class="nodeInfo">${i}${o}${s}</div>`}window.toggleRanking=()=>{dn&&Xe()?gn():(pn(),dn=!0)},window.sortTableByColumn=on;var An="http://www.w3.org/1999/xhtml",En={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nn(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),En.hasOwnProperty(e)?{space:En[e],local:t}:t}function jn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===An&&e.documentElement.namespaceURI===An?e.createElement(t):e.createElementNS(n,t)}}function Sn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tn(t){var e=Nn(t);return(e.local?Sn:jn)(e)}function $n(){}function Mn(t){return null==t?$n:function(){return this.querySelector(t)}}function Rn(t){"function"!=typeof t&&(t=Mn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s=t.call(o,o.__data__,c,a))&&("__data__"in o&&(s.__data__=o.__data__),l[c]=s);return new _i(r,this._parents)}function In(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Cn(){return[]}function Bn(t){return null==t?Cn:function(){return this.querySelectorAll(t)}}function Ln(t){return function(){return In(t.apply(this,arguments))}}function zn(t){t="function"==typeof t?Ln(t):Bn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,l=0;l<u;++l)(s=a[l])&&(r.push(t.call(s,s.__data__,l,a)),i.push(s));return new _i(r,i)}function Fn(t){return function(){return this.matches(t)}}function Dn(t){return function(e){return e.matches(t)}}var Pn=Array.prototype.find;function qn(t){return function(){return Pn.call(this.children,t)}}function Vn(){return this.firstElementChild}function Un(t){return this.select(null==t?Vn:qn("function"==typeof t?t:Dn(t)))}var Jn=Array.prototype.filter;function Hn(){return Array.from(this.children)}function Xn(t){return function(){return Jn.call(this.children,t)}}function Wn(t){return this.selectAll(null==t?Hn:Xn("function"==typeof t?t:Dn(t)))}function Yn(t){"function"!=typeof t&&(t=Fn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new _i(r,this._parents)}function Gn(t){return new Array(t.length)}function Kn(){return new _i(this._enter||this._groups.map(Gn),this._parents)}function Zn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Qn(t){return function(){return t}}function tr(t,e,n,r,i,o){for(var s,a=0,u=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Zn(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function er(t,e,n,r,i,o,s){var a,u,l,c=new Map,f=e.length,h=o.length,d=new Array(f);for(a=0;a<f;++a)(u=e[a])&&(d[a]=l=s.call(u,u.__data__,a,e)+"",c.has(l)?i[a]=u:c.set(l,u));for(a=0;a<h;++a)l=s.call(t,o[a],a,o)+"",(u=c.get(l))?(r[a]=u,u.__data__=o[a],c.delete(l)):n[a]=new Zn(t,o[a]);for(a=0;a<f;++a)(u=e[a])&&c.get(d[a])===u&&(i[a]=u)}function nr(t){return t.__data__}function rr(t,e){if(!arguments.length)return Array.from(this,nr);var n=e?er:tr,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Qn(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,d=ir(t.call(c,c&&c.__data__,l,r)),p=d.length,y=a[l]=new Array(p),v=s[l]=new Array(p);n(c,f,y,v,u[l]=new Array(h),d,e);for(var m,g,w=0,b=0;w<p;++w)if(m=y[w]){for(w>=b&&(b=w+1);!(g=v[b])&&++b<p;);m._next=g||null}}return(s=new _i(s,r))._enter=a,s._exit=u,s}function ir(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function or(){return new _i(this._exit||this._groups.map(Gn),this._parents)}function sr(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function ar(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l,c=n[u],f=r[u],h=c.length,d=a[u]=new Array(h),p=0;p<h;++p)(l=c[p]||f[p])&&(d[p]=l);for(;u<i;++u)a[u]=n[u];return new _i(a,this._parents)}function ur(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this}function lr(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=cr);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,l=i[o]=new Array(u),c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new _i(i,this._parents).order()}function cr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hr(){return Array.from(this)}function dr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function pr(){let t=0;for(const e of this)++t;return t}function yr(){return!this.node()}function vr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this}function mr(t){return function(){this.removeAttribute(t)}}function gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wr(t,e){return function(){this.setAttribute(t,e)}}function br(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _r(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function xr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function kr(t,e){var n=Nn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?gr:mr:"function"==typeof e?n.local?xr:_r:n.local?br:wr)(n,e))}function Or(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ar(t){return function(){this.style.removeProperty(t)}}function Er(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Nr(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jr(t,e,n){return arguments.length>1?this.each((null==e?Ar:"function"==typeof e?Nr:Er)(t,e,null==n?"":n)):Sr(this.node(),t)}function Sr(t,e){return t.style.getPropertyValue(e)||Or(t).getComputedStyle(t,null).getPropertyValue(e)}function Tr(t){return function(){delete this[t]}}function $r(t,e){return function(){this[t]=e}}function Mr(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Rr(t,e){return arguments.length>1?this.each((null==e?Tr:"function"==typeof e?Mr:$r)(t,e)):this.node()[t]}function Ir(t){return t.trim().split(/^|\s+/)}function Cr(t){return t.classList||new Br(t)}function Br(t){this._node=t,this._names=Ir(t.getAttribute("class")||"")}function Lr(t,e){for(var n=Cr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function zr(t,e){for(var n=Cr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Fr(t){return function(){Lr(this,t)}}function Dr(t){return function(){zr(this,t)}}function Pr(t,e){return function(){(e.apply(this,arguments)?Lr:zr)(this,t)}}function qr(t,e){var n=Ir(t+"");if(arguments.length<2){for(var r=Cr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Pr:e?Fr:Dr)(n,e))}function Vr(){this.textContent=""}function Ur(t){return function(){this.textContent=t}}function Jr(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Hr(t){return arguments.length?this.each(null==t?Vr:("function"==typeof t?Jr:Ur)(t)):this.node().textContent}function Xr(){this.innerHTML=""}function Wr(t){return function(){this.innerHTML=t}}function Yr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Gr(t){return arguments.length?this.each(null==t?Xr:("function"==typeof t?Yr:Wr)(t)):this.node().innerHTML}function Kr(){this.nextSibling&&this.parentNode.appendChild(this)}function Zr(){return this.each(Kr)}function Qr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ti(){return this.each(Qr)}function ei(t){var e="function"==typeof t?t:Tn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ni(){return null}function ri(t,e){var n="function"==typeof t?t:Tn(t),r=null==e?ni:"function"==typeof e?e:Mn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ii(){var t=this.parentNode;t&&t.removeChild(this)}function oi(){return this.each(ii)}function si(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ai(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ui(t){return this.select(t?ai:si)}function li(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ci(t){return function(e){t.call(this,e,this.__data__)}}function fi(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function hi(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function di(t,e,n){return function(){var r,i=this.__on,o=ci(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function pi(t,e,n){var r,i,o=fi(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?di:hi,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}function yi(t,e,n){var r=Or(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function vi(t,e){return function(){return yi(this,t,e)}}function mi(t,e){return function(){return yi(this,t,e.apply(this,arguments))}}function gi(t,e){return this.each(("function"==typeof e?mi:vi)(t,e))}function*wi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}Zn.prototype={constructor:Zn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Br.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bi=[null];function _i(t,e){this._groups=t,this._parents=e}function xi(){return new _i([[document.documentElement]],bi)}function ki(){return this}function Oi(t){return"string"==typeof t?new _i([[document.querySelector(t)]],[document.documentElement]):new _i([[t]],bi)}function Ai(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ei(t,e){if(t=Ai(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}_i.prototype=xi.prototype={constructor:_i,select:Rn,selectAll:zn,selectChild:Un,selectChildren:Wn,filter:Yn,data:rr,enter:Kn,exit:or,join:sr,merge:ar,selection:ki,order:ur,sort:lr,call:fr,nodes:hr,node:dr,size:pr,empty:yr,each:vr,attr:kr,style:jr,property:Rr,classed:qr,text:Hr,html:Gr,raise:Zr,lower:ti,append:ei,insert:ri,remove:oi,clone:ui,datum:li,on:pi,dispatch:gi,[Symbol.iterator]:wi};var Ni={value:()=>{}};function ji(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Si(r)}function Si(t){this._=t}function Ti(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function $i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Mi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ni,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Si.prototype=ji.prototype={constructor:Si,on:function(t,e){var n,r=this._,i=Ti(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=Mi(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Mi(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=$i(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Si(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Ri={capture:!0,passive:!1};function Ii(t){t.preventDefault(),t.stopImmediatePropagation()}function Ci(t){var e=t.document.documentElement,n=Oi(t).on("dragstart.drag",Ii,Ri);"onselectstart"in e?n.on("selectstart.drag",Ii,Ri):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Bi(t,e){var n=t.document.documentElement,r=Oi(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ii,Ri),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Li(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Fi(){}var Di=.7,Pi=1/Di,qi="\\s*([+-]?\\d+)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ji=/^#([0-9a-f]{3,8})$/,Hi=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),Xi=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),Wi=new RegExp(`^rgba\\(${qi},${qi},${qi},${Vi}\\)$`),Yi=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${Vi}\\)$`),Gi=new RegExp(`^hsl\\(${Vi},${Ui},${Ui}\\)$`),Ki=new RegExp(`^hsla\\(${Vi},${Ui},${Ui},${Vi}\\)$`),Zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qi(){return this.rgb().formatHex()}function to(){return this.rgb().formatHex8()}function eo(){return mo(this).formatHsl()}function no(){return this.rgb().formatRgb()}function ro(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ji.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?io(e):3===n?new uo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?oo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?oo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Hi.exec(t))?new uo(e[1],e[2],e[3],1):(e=Xi.exec(t))?new uo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Wi.exec(t))?oo(e[1],e[2],e[3],e[4]):(e=Yi.exec(t))?oo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Gi.exec(t))?vo(e[1],e[2]/100,e[3]/100,1):(e=Ki.exec(t))?vo(e[1],e[2]/100,e[3]/100,e[4]):Zi.hasOwnProperty(t)?io(Zi[t]):"transparent"===t?new uo(NaN,NaN,NaN,0):null}function io(t){return new uo(t>>16&255,t>>8&255,255&t,1)}function oo(t,e,n,r){return r<=0&&(t=e=n=NaN),new uo(t,e,n,r)}function so(t){return t instanceof Fi||(t=ro(t)),t?new uo((t=t.rgb()).r,t.g,t.b,t.opacity):new uo}function ao(t,e,n,r){return 1===arguments.length?so(t):new uo(t,e,n,null==r?1:r)}function uo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function lo(){return`#${yo(this.r)}${yo(this.g)}${yo(this.b)}`}function co(){return`#${yo(this.r)}${yo(this.g)}${yo(this.b)}${yo(255*(isNaN(this.opacity)?1:this.opacity))}`}function fo(){const t=ho(this.opacity);return`${1===t?"rgb(":"rgba("}${po(this.r)}, ${po(this.g)}, ${po(this.b)}${1===t?")":`, ${t})`}`}function ho(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function po(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yo(t){return((t=po(t))<16?"0":"")+t.toString(16)}function vo(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wo(t,e,n,r)}function mo(t){if(t instanceof wo)return new wo(t.h,t.s,t.l,t.opacity);if(t instanceof Fi||(t=ro(t)),!t)return new wo;if(t instanceof wo)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new wo(s,a,u,t.opacity)}function go(t,e,n,r){return 1===arguments.length?mo(t):new wo(t,e,n,null==r?1:r)}function wo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function bo(t){return(t=(t||0)%360)<0?t+360:t}function _o(t){return Math.max(0,Math.min(1,t||0))}function xo(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Li(Fi,ro,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qi,formatHex:Qi,formatHex8:to,formatHsl:eo,formatRgb:no,toString:no}),Li(uo,ao,zi(Fi,{brighter(t){return t=null==t?Pi:Math.pow(Pi,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Di:Math.pow(Di,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new uo(po(this.r),po(this.g),po(this.b),ho(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lo,formatHex:lo,formatHex8:co,formatRgb:fo,toString:fo})),Li(wo,go,zi(Fi,{brighter(t){return t=null==t?Pi:Math.pow(Pi,t),new wo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Di:Math.pow(Di,t),new wo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new uo(xo(t>=240?t-240:t+120,i,r),xo(t,i,r),xo(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new wo(bo(this.h),_o(this.s),_o(this.l),ho(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ho(this.opacity);return`${1===t?"hsl(":"hsla("}${bo(this.h)}, ${100*_o(this.s)}%, ${100*_o(this.l)}%${1===t?")":`, ${t})`}`}}));var ko=t=>()=>t;function Oo(t,e){return function(n){return t+n*e}}function Ao(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Eo(t){return 1===(t=+t)?No:function(e,n){return n-e?Ao(e,n,t):ko(isNaN(e)?n:e)}}function No(t,e){var n=e-t;return n?Oo(t,n):ko(isNaN(t)?e:t)}var jo=function t(e){var n=Eo(e);function r(t,e){var r=n((t=ao(t)).r,(e=ao(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=No(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function So(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var To=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$o=new RegExp(To.source,"g");function Mo(t){return function(){return t}}function Ro(t){return function(e){return t(e)+""}}function Io(t,e){var n,r,i,o=To.lastIndex=$o.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=To.exec(t))&&(r=$o.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:So(n,r)})),o=$o.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?Ro(u[0].x):Mo(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}var Co=180/Math.PI,Bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Lo;function zo(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Co,skewX:Math.atan(u)*Co,scaleX:s,scaleY:a}}function Fo(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bo:zo(e.a,e.b,e.c,e.d,e.e,e.f)}function Do(t){return null==t?Bo:(Lo||(Lo=document.createElementNS("http://www.w3.org/2000/svg","g")),Lo.setAttribute("transform",t),(t=Lo.transform.baseVal.consolidate())?zo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Bo)}function Po(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:So(t,i)},{i:u-2,x:So(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:So(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:So(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:So(t,n)},{i:a-2,x:So(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var qo=Po(Fo,"px, ","px)","deg)"),Vo=Po(Do,", ",")",")"),Uo=1e-12;function Jo(t){return((t=Math.exp(t))+1/t)/2}function Ho(t){return((t=Math.exp(t))-1/t)/2}function Xo(t){return((t=Math.exp(2*t))-1)/(t+1)}var Wo=function t(e,n,r){function i(t,i){var o,s,a=t[0],u=t[1],l=t[2],c=i[0],f=i[1],h=i[2],d=c-a,p=f-u,y=d*d+p*p;if(y<Uo)s=Math.log(h/l)/e,o=function(t){return[a+t*d,u+t*p,l*Math.exp(e*t*s)]};else{var v=Math.sqrt(y),m=(h*h-l*l+r*y)/(2*l*n*v),g=(h*h-l*l-r*y)/(2*h*n*v),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(g*g+1)-g);s=(b-w)/e,o=function(t){var r=t*s,i=Jo(w),o=l/(n*v)*(i*Xo(e*r+w)-Ho(w));return[a+o*d,u+o*p,l*i/Jo(e*r+w)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),Yo=0,Go=0,Ko=0,Zo=1e3,Qo,ts,es=0,ns=0,rs=0,is="object"==typeof performance&&performance.now?performance:Date,os="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ss(){return ns||(os(as),ns=is.now()+rs)}function as(){ns=0}function us(){this._call=this._time=this._next=null}function ls(t,e,n){var r=new us;return r.restart(t,e,n),r}function cs(){ss(),++Yo;for(var t,e=Qo;e;)(t=ns-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Yo}function fs(){ns=(es=is.now())+rs,Yo=Go=0;try{cs()}finally{Yo=0,ds(),ns=0}}function hs(){var t=is.now(),e=t-es;e>Zo&&(rs-=e,es=t)}function ds(){for(var t,e,n=Qo,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Qo=e);ts=t,ps(r)}function ps(t){Yo||(Go&&(Go=clearTimeout(Go)),t-ns>24?(t<1/0&&(Go=setTimeout(fs,t-is.now()-rs)),Ko&&(Ko=clearInterval(Ko))):(Ko||(es=is.now(),Ko=setInterval(hs,Zo)),Yo=1,os(fs)))}function ys(t,e,n){var r=new us;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}us.prototype=ls.prototype={constructor:us,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ss():+n)+(null==e?0:+e),this._next||ts===this||(ts?ts._next=this:Qo=this,ts=this),this._call=t,this._time=n,ps()},stop:function(){this._call&&(this._call=null,this._time=1/0,ps())}};var vs=ji("start","end","cancel","interrupt"),ms=[],gs=0,ws=1,bs=2,_s=3,xs=4,ks=5,Os=6;function As(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};Ss(t,n,{name:e,index:r,group:i,on:vs,tween:ms,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gs})}function Es(t,e){var n=js(t,e);if(n.state>gs)throw new Error("too late; already scheduled");return n}function Ns(t,e){var n=js(t,e);if(n.state>_s)throw new Error("too late; already running");return n}function js(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ss(t,e,n){var r,i=t.__transition;function o(u){var l,c,f,h;if(n.state!==ws)return a();for(l in i)if((h=i[l]).name===n.name){if(h.state===_s)return ys(o);h.state===xs?(h.state=Os,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=Os,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(ys(function(){n.state===_s&&(n.state=xs,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=bs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bs){for(n.state=_s,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=ks,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);n.state===ks&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=Os,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ls(function(t){n.state=ws,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}function Ts(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>bs&&n.state<ks,n.state=Os,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}function $s(t){return this.each(function(){Ts(this,t)})}function Ms(t,e){var n,r;return function(){var i=Ns(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function Rs(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Ns(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Is(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=js(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Ms:Rs)(n,t,e))}function Cs(t,e,n){var r=t._id;return t.each(function(){var t=Ns(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return js(t,r).value[e]}}function Bs(t,e){var n;return("number"==typeof e?So:e instanceof ro?jo:(n=ro(e))?(e=n,jo):Io)(t,e)}function Ls(t){return function(){this.removeAttribute(t)}}function zs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fs(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Ds(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Ps(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function qs(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function Vs(t,e){var n=Nn(t),r="transform"===n?Vo:Bs;return this.attrTween(t,"function"==typeof e?(n.local?qs:Ps)(n,r,Cs(this,"attr."+t,e)):null==e?(n.local?zs:Ls)(n):(n.local?Ds:Fs)(n,r,e))}function Us(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Js(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Hs(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Js(t,i)),n}return i._value=e,i}function Xs(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Us(t,i)),n}return i._value=e,i}function Ws(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Nn(t);return this.tween(n,(r.local?Hs:Xs)(r,e))}function Ys(t,e){return function(){Es(this,t).delay=+e.apply(this,arguments)}}function Gs(t,e){return e=+e,function(){Es(this,t).delay=e}}function Ks(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ys:Gs)(e,t)):js(this.node(),e).delay}function Zs(t,e){return function(){Ns(this,t).duration=+e.apply(this,arguments)}}function Qs(t,e){return e=+e,function(){Ns(this,t).duration=e}}function ta(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zs:Qs)(e,t)):js(this.node(),e).duration}function ea(t,e){if("function"!=typeof e)throw new Error;return function(){Ns(this,t).ease=e}}function na(t){var e=this._id;return arguments.length?this.each(ea(e,t)):js(this.node(),e).ease}function ra(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Ns(this,t).ease=n}}function ia(t){if("function"!=typeof t)throw new Error;return this.each(ra(this._id,t))}function oa(t){"function"!=typeof t&&(t=Fn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new Ia(r,this._parents,this._name,this._id)}function sa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,l=e[a],c=n[a],f=l.length,h=s[a]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;a<r;++a)s[a]=e[a];return new Ia(s,this._parents,this._name,this._id)}function aa(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function ua(t,e,n){var r,i,o=aa(e)?Es:Ns;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function la(t,e){var n=this._id;return arguments.length<2?js(this.node(),n).on.on(t):this.each(ua(n,t,e))}function ca(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function fa(){return this.on("end.remove",ca(this._id))}function ha(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Mn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,l=r[s],c=l.length,f=o[s]=new Array(c),h=0;h<c;++h)(a=l[h])&&(u=t.call(a,a.__data__,h,l))&&("__data__"in a&&(u.__data__=a.__data__),f[h]=u,As(f[h],e,n,h,f,js(a,n)));return new Ia(o,this._parents,e,n)}function da(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Bn(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,l=r[a],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=js(u,n),y=0,v=d.length;y<v;++y)(h=d[y])&&As(h,e,n,y,d,p);o.push(d),s.push(u)}return new Ia(o,s,e,n)}var pa=xi.prototype.constructor;function ya(){return new pa(this._groups,this._parents)}function va(t,e){var n,r,i;return function(){var o=Sr(this,t),s=(this.style.removeProperty(t),Sr(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function ma(t){return function(){this.style.removeProperty(t)}}function ga(t,e,n){var r,i,o=n+"";return function(){var s=Sr(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function wa(t,e,n){var r,i,o;return function(){var s=Sr(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=Sr(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}function ba(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=Ns(this,t),l=u.on,c=null==u.value[s]?o||(o=ma(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(a,i=c),u.on=r}}function _a(t,e,n){var r="transform"==(t+="")?qo:Bs;return null==e?this.styleTween(t,va(t,r)).on("end.style."+t,ma(t)):"function"==typeof e?this.styleTween(t,wa(t,r,Cs(this,"style."+t,e))).each(ba(this._id,t)):this.styleTween(t,ga(t,r,e),n).on("end.style."+t,null)}function xa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ka(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&xa(t,o,n)),r}return o._value=e,o}function Oa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,ka(t,e,null==n?"":n))}function Aa(t){return function(){this.textContent=t}}function Ea(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Na(t){return this.tween("text","function"==typeof t?Ea(Cs(this,"text",t)):Aa(null==t?"":t+""))}function ja(t){return function(e){this.textContent=t.call(this,e)}}function Sa(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ja(r)),e}return r._value=t,r}function Ta(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Sa(t))}function $a(){for(var t=this._name,e=this._id,n=Ca(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)if(s=a[l]){var c=js(s,e);As(s,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ia(r,this._parents,t,n)}function Ma(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){0===--i&&o()}};n.each(function(){var n=Ns(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e}),0===i&&o()})}var Ra=0;function Ia(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ca(){return++Ra}var Ba=xi.prototype;function La(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ia.prototype={constructor:Ia,select:ha,selectAll:da,selectChild:Ba.selectChild,selectChildren:Ba.selectChildren,filter:oa,merge:sa,selection:ya,transition:$a,call:Ba.call,nodes:Ba.nodes,node:Ba.node,size:Ba.size,empty:Ba.empty,each:Ba.each,on:la,attr:Vs,attrTween:Ws,style:_a,styleTween:Oa,text:Na,textTween:Ta,remove:fa,tween:Is,delay:Ks,duration:ta,ease:na,easeVarying:ia,end:Ma,[Symbol.iterator]:Ba[Symbol.iterator]};var za={time:null,delay:0,duration:250,ease:La};function Fa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Da(t){var e,n;t instanceof Ia?(e=t._id,t=t._name):(e=Ca(),(n=za).time=ss(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)(s=a[l])&&As(s,t,e,l,a,n||Fa(s,e));return new Ia(r,this._parents,t,e)}xi.prototype.interrupt=$s,xi.prototype.transition=Da;var Pa=t=>()=>t;function qa(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Va(t,e,n){this.k=t,this.x=e,this.y=n}Va.prototype={constructor:Va,scale:function(t){return 1===t?this:new Va(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Va(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ua=new Va(1,0,0);function Ja(t){t.stopImmediatePropagation()}function Ha(t){t.preventDefault(),t.stopImmediatePropagation()}function Xa(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Wa(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ya(){return this.__zoom||Ua}function Ga(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function Za(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Qa(){var t,e,n,r=Xa,i=Wa,o=Za,s=Ga,a=Ka,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=Wo,h=ji("start","zoom","end"),d=0,p=10;function y(t){t.property("__zoom",Ya).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new Va(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new Va(t.k,r,i)}function g(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n,r){t.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var t=this,o=arguments,s=b(t,o).event(r),a=i.apply(t,o),u=null==n?g(a):"function"==typeof n?n.apply(t,o):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,o):e,d=f(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=d(t),n=l/e[2];t=new Va(n,u[0]-e[0]*n,u[1]-e[1]*n)}s.zoom(null,t)}})}function b(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function x(t,...e){if(r.apply(this,arguments)){var n=b(this,e).event(t),i=this.__zoom,a=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,s.apply(this,arguments)))),c=Ei(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[c,i.invert(c)],Ts(this),n.start()}Ha(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(m(v(i,a),n.mouse[0],n.mouse[1]),n.extent,l))}}function k(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,s=b(this,e,!0).event(t),a=Oi(t.view).on("mousemove.zoom",function(t){if(Ha(t),!s.moved){var e=t.clientX-c,n=t.clientY-f;s.moved=e*e+n*n>d}s.event(t).zoom("mouse",o(m(s.that.__zoom,s.mouse[0]=Ei(t,i),s.mouse[1]),s.extent,l))},!0).on("mouseup.zoom",function(t){a.on("mousemove.zoom mouseup.zoom",null),Bi(t.view,s.moved),Ha(t),s.event(t).end()},!0),u=Ei(t,i),c=t.clientX,f=t.clientY;Ci(t.view),Ja(t),s.mouse=[u,this.__zoom.invert(u)],Ts(this),s.start()}}function O(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,s=Ei(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),u=n.k*(t.shiftKey?.5:2),f=o(m(v(n,u),s,a),i.apply(this,e),l);Ha(t),c>0?Oi(this).transition().duration(c).call(w,f,s,t):Oi(this).call(y.transform,f,s,t)}}function A(n,...i){if(r.apply(this,arguments)){var o,s,a,u,l=n.touches,c=l.length,f=b(this,i,n.changedTouches.length===c).event(n);for(Ja(n),s=0;s<c;++s)u=[u=Ei(a=l[s],this),this.__zoom.invert(u),a.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,o=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(f.taps<2&&(e=u[0],t=setTimeout(function(){t=null},500)),Ts(this),f.start())}}function E(t,...e){if(this.__zooming){var n,r,i,s,a=b(this,e).event(t),u=t.changedTouches,c=u.length;for(Ha(t),n=0;n<c;++n)i=Ei(r=u[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var f=a.touch0[0],h=a.touch0[1],d=a.touch1[0],p=a.touch1[1],y=(y=d[0]-f[0])*y+(y=d[1]-f[1])*y,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;r=v(r,Math.sqrt(y/g)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],s=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(m(r,i,s),a.extent,l))}}function N(t,...r){if(this.__zooming){var i,o,s=b(this,r).event(t),a=t.changedTouches,u=a.length;for(Ja(t),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<u;++i)o=a[i],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=Ei(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<p)){var l=Oi(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return y.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",Ya),t!==i?w(t,e,n,r):i.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},y.scaleBy=function(t,e,n,r){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},y.scaleTo=function(t,e,n,r){y.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,s=null==n?g(t):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),u="function"==typeof e?e.apply(this,arguments):e;return o(m(v(r,u),s,a),t,l)},n,r)},y.translateBy=function(t,e,n,r){y.transform(t,function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)},null,r)},y.translateTo=function(t,e,n,r,s){y.transform(t,function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==r?g(t):"function"==typeof r?r.apply(this,arguments):r;return o(Ua.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)},r,s)},_.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Oi(this.that).datum();h.call(t,this.that,new qa(t,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:h}),e)}},y.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:Pa(+t),y):s},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:Pa(!!t),y):r},y.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Pa(!!t),y):a},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:Pa([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],y):[u[0],u[1]]},y.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],y):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(c=+t,y):c},y.interpolate=function(t){return arguments.length?(f=t,y):f},y.on=function(){var t=h.on.apply(h,arguments);return t===h?y:t},y.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,y):Math.sqrt(d)},y.tapDistance=function(t){return arguments.length?(p=+t,y):p},y}Va.prototype;const tu=t=>{const e=Ye(),n="number"==typeof t?e.nodeMap.get(t.toString()):t;if(n){if(e.hoveredNode=n,window.location.hash!==`#${n.asn}`&&(window.location.hash=n.asn),void 0!==n.x&&void 0!==n.y){const t=window.innerWidth/2,r=window.innerHeight/2,i=e.transform.k,o=t-n.x*i,s=r-n.y*i;Oi(e.canvas).transition().duration(500).call(e.zoom.transform,Ua.translate(o,s).scale(i))}document.title=`${n.desc} (AS${n.asn}) - ${l.pageTitle}`,e.draw()}else document.title=l.pageTitle};function eu(){const t=Ye(),e=document.getElementById("search-input").value;if(!e.length)return;const n=e.toLowerCase(),r=t.nodeMap.get(n);if(r)tu(r),pn(r);else if(e.startsWith("424242"))alert("Node not found.");else{const e=`424242${n}`,r=t.nodeMap.get(e);r?(tu(r),pn(r),document.getElementById("search-input").value=e):alert("Node not found.")}}function nu(t){return"Enter"===t.key&&eu(),!1}window.navigateToNode=(t,e=!1)=>{const n=Ye(),r="number"==typeof t?n.nodeMap.get(t.toString()):t;r&&(tu(r),e&&pn(r))};const ru=()=>{document.getElementById("search-input")?.addEventListener("keydown",nu)},iu=()=>{document.getElementById("search-btn")?.addEventListener("click",eu)};function ou(){document.addEventListener("gesturestart",function(t){t.preventDefault()})}function su(t=!1){document.getElementById("search-container").style.display=t?"block":"none"}const au=()=>{ru()},uu=()=>{document.getElementById("close-sidebar")?.addEventListener("click",gn)},lu=()=>{iu()};function cu(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,u=0;for(i=0;i<s;++i)a+=(o=n[i]).x,u+=o.y;for(a=(a/s-t)*r,u=(u/s-e)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function fu(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return hu(this.cover(e,n),e,n,t)}function hu(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,u,l,c,f,h,d=t._root,p={data:r},y=t._x0,v=t._y0,m=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(o=(y+m)/2))?y=o:m=o,(c=n>=(s=(v+g)/2))?v=s:g=s,i=d,!(d=d[f=c<<1|l]))return i[f]=p,t;if(a=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===a&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(o=(y+m)/2))?y=o:m=o,(c=n>=(s=(v+g)/2))?v=s:g=s}while((f=c<<1|l)==(h=(u>=s)<<1|a>=o));return i[h]=d,i[f]=p,t}function du(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)hu(this,s[n],a[n],t[n]);return this}function pu(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=l,l=s,u*=2,a){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function yu(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t}function vu(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function mu(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function gu(t,e,n){var r,i,o,s,a,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],y=this._root;for(y&&p.push(new mu(y,c,f,h,d)),null==n?n=1/0:(c=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(y=u.node)||(i=u.x0)>h||(o=u.y0)>d||(s=u.x1)<c||(a=u.y1)<f))if(y.length){var v=(i+s)/2,m=(o+a)/2;p.push(new mu(y[3],v,m,s,a),new mu(y[2],i,m,v,a),new mu(y[1],v,o,s,m),new mu(y[0],i,o,v,m)),(l=(e>=m)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var g=t-+this._x.call(null,y.data),w=e-+this._y.call(null,y.data),b=g*g+w*w;if(b<n){var _=Math.sqrt(n=b);c=t-_,f=e-_,h=t+_,d=e+_,r=y.data}}return r}function wu(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,u,l,c,f,h,d=this._root,p=this._x0,y=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(a=(p+v)/2))?p=a:v=a,(c=s>=(u=(y+m)/2))?y=u:m=u,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)}function bu(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function _u(){return this._root}function xu(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t}function ku(t){var e,n,r,i,o,s,a=[],u=this._root;for(u&&a.push(new mu(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&u.length){var l=(r+o)/2,c=(i+s)/2;(n=u[3])&&a.push(new mu(n,l,c,o,s)),(n=u[2])&&a.push(new mu(n,r,c,l,s)),(n=u[1])&&a.push(new mu(n,l,i,o,c)),(n=u[0])&&a.push(new mu(n,r,i,l,c))}return this}function Ou(t){var e,n=[],r=[];for(this._root&&n.push(new mu(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,u=e.x1,l=e.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&n.push(new mu(o,s,a,c,f)),(o=i[1])&&n.push(new mu(o,c,a,u,f)),(o=i[2])&&n.push(new mu(o,s,f,c,l)),(o=i[3])&&n.push(new mu(o,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function Au(t){return t[0]}function Eu(t){return arguments.length?(this._x=t,this):this._x}function Nu(t){return t[1]}function ju(t){return arguments.length?(this._y=t,this):this._y}function Su(t,e,n){var r=new Tu(null==e?Au:e,null==n?Nu:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Tu(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function $u(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Mu=Su.prototype=Tu.prototype;function Ru(t){return function(){return t}}function Iu(t){return 1e-6*(t()-.5)}function Cu(t){return t.index}function Bu(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Lu(t){var e,n,r,i,o,s,a=Cu,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=Ru(30),c=1;function f(r){for(var i=0,a=t.length;i<c;++i)for(var u,l,f,h,d,p,y,v=0;v<a;++v)l=(u=t[v]).source,h=(f=u.target).x+f.vx-l.x-l.vx||Iu(s),d=f.y+f.vy-l.y-l.vy||Iu(s),h*=p=((p=Math.sqrt(h*h+d*d))-n[v])/p*r*e[v],d*=p,f.vx-=h*(y=o[v]),f.vy-=d*y,l.vx+=h*(y=1-y),l.vy+=d*y}function h(){if(r){var s,u,l=r.length,c=t.length,f=new Map(r.map((t,e)=>[a(t,e,r),t]));for(s=0,i=new Array(l);s<c;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Bu(f,u.source)),"object"!=typeof u.target&&(u.target=Bu(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(c);s<c;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,s=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(a=t,f):a},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:Ru(+t),d(),f):u},f.distance=function(t){return arguments.length?(l="function"==typeof t?t:Ru(+t),p(),f):l},f}Mu.copy=function(){var t,e,n=new Tu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=$u(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=$u(e));return n},Mu.add=fu,Mu.addAll=du,Mu.cover=pu,Mu.data=yu,Mu.extent=vu,Mu.find=gu,Mu.remove=wu,Mu.removeAll=bu,Mu.root=_u,Mu.size=xu,Mu.visit=ku,Mu.visitAfter=Ou,Mu.x=Eu,Mu.y=ju;const zu=1664525,Fu=1013904223,Du=4294967296;function Pu(){let t=1;return()=>(t=(zu*t+Fu)%Du)/Du}function qu(t){return t.x}function Vu(t){return t.y}var Uu=10,Ju=Math.PI*(3-Math.sqrt(5));function Hu(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=ls(f),l=ji("tick","end"),c=Pu();function f(){h(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function h(r){var u,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,a.forEach(function(t){t(n)}),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=Uu*Math.sqrt(.5+n),o=n*Ju;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(c=t,a.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(s=(i=e-(a=t[l]).x)*i+(o=n-a.y)*o)<r&&(u=a,r=s);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function Xu(){var t,e,n,r,i,o=Ru(-30),s=1,a=1/0,u=.81;function l(n){var i,o=t.length,s=Su(t,qu,Vu).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],s.visit(h)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,s,a=0,u=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function h(t,o,l,c){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,d=c-o,p=f*f+h*h;if(d*d/u<p)return p<a&&(0===f&&(p+=(f=Iu(n))*f),0===h&&(p+=(h=Iu(n))*h),p<s&&(p=Math.sqrt(s*p)),e.vx+=f*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===f&&(p+=(f=Iu(n))*f),0===h&&(p+=(h=Iu(n))*h),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=f*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:Ru(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l}let Wu,Yu,Gu,Ku,Zu;function Qu(t){Wu=t;const e=Ke(ol,13);Wu.canvas.addEventListener("pointermove",e),Wu.canvas.addEventListener("pointerleave",al),Wu.canvas.addEventListener("pointerdown",sl),Wu.canvas.addEventListener("pointerup",ul),Wu.canvas.addEventListener("contextmenu",t=>(2===t.button&&tl(),t.preventDefault(),!1)),document.addEventListener("keydown",t=>{if("Escape"===t.key)return tl(),t.preventDefault(),!1}),rl(),au(),uu(),lu(),fl(),el()}function tl(){Wu&&(gn(),Wu.hoveredNode=null,Wu.draw(),window.location.hash&&window.history.pushState("",document.title,window.location.pathname+window.location.search),document.title=l.pageTitle)}function el(){Oi(Wu.canvas).call(Wu.zoom).on("dblclick.zoom",null)}function nl(){Oi(Wu.canvas).on(".zoom",null)}function rl(){window.addEventListener("resize",()=>{Wu.canvas.width=window.innerWidth*l.render.pixelRatio,Wu.canvas.height=window.innerHeight*l.render.pixelRatio,Wu.canvas.style.width=`${window.innerWidth}px`,Wu.canvas.style.height=`${window.innerHeight}px`,Wu.ctx.scale(l.render.pixelRatio,l.render.pixelRatio),Wu.simulation.force("center",cu(window.innerWidth/2,window.innerHeight/2)),Wu.simulation.alpha(.5).restart()})}function il(t,e){const n=t.getBoundingClientRect(),r=window.scrollX||document.documentElement.scrollLeft,i=window.scrollY||document.documentElement.scrollTop;return Wu.transform.invert([e.pageX-(n.left+r),e.pageY-(n.top+i)])}function ol(t){const[e,n]=il(Wu.canvas,t);if(Yu&&(Gu=Yu,nl(),Wu.simulation.alphaTarget(.3).restart(),Yu=null),Gu)return Ku&&(xn(),Ku=!1),Gu.fx=e,Gu.fy=n,void Wu.draw();if(Zu)Wu.canvas.style.cursor="grabbing";else{const r=cl(e,n);Wu.canvas.style.cursor=r?"pointer":"grab",r?(Xe()||(Wu.hoveredNode=r,Wu.draw()),_n(t,r),Ku=!0):(xn(),Ku=!1)}}function sl(t){Zu=!0;const[e,n]=il(Wu.canvas,t);Yu=cl(e,n),Yu?nl():Wu.canvas.style.cursor="grabbing"}function al(){Zu=!1,Yu=null,ll()}function ul(t){if(Zu=!1,Yu){const[e,n]=il(Wu.canvas,t);return Wu.hoveredNode=cl(e,n),Wu.hoveredNode&&(tu(Wu.hoveredNode),pn(Wu.hoveredNode)),Yu=null,void el()}Wu.canvas.style.cursor="grab",ll()}function ll(){Gu&&(Gu.fx=null,Gu.fy=null,Wu.simulation.alphaTarget(0),Gu=null,Yu=null,el())}function cl(t,e){let n=1/0,r=null;return Wu.nodes.forEach(i=>{const o=Math.hypot(i.x-t,i.y-e);o<15&&o<n&&(n=o,r=i)}),r}function fl(){window.addEventListener("hashchange",hl),window.location.hash&&Wu.simulation.on("end",()=>{hl()})}function hl(){const t=window.location.hash.slice(1);t&&Wu.nodeMap?dl(t):tl()}function dl(t){const e=t.toLowerCase();let n=Wu.nodeMap.get(e);if(n)return tu(n),void pn(n);if(!t.startsWith("424242")){const t=`424242${e}`;if(n=Wu.nodeMap.get(t),n)return tu(n),void pn(n)}tl()}let pl=0;const yl=1e3/l.render.node.maxFPS,vl={link:{default:{color:l.render.link.colorDefault,width:l.render.link.widthDefault},emphasized:{color:l.render.link.colorEmphasize,width:l.render.link.widthEmphasize}},node:{colors:{current:l.render.node.colorCurrent,linked:l.render.node.colorLinked,default:l.render.node.colorDefault},border:{color:"#fff",width:.5},label:{color:l.render.node.labelColor}}};function ml(t,e){const{pixelRatio:n}=l.render,r=l.render.canvas.viewportMargin,i=e.k;return{left:-e.x/i-r,right:(t.width/n-e.x)/i+r,top:-e.y/i-r,bottom:(t.height/n-e.y)/i+r}}function gl(t,e,n,r=0){return t>=n.left-r&&t<=n.right+r&&e>=n.top-r&&e<=n.bottom+r}const wl=t=>{const e=performance.now();if(e-pl<yl)return;pl=e;const{canvas:n,ctx:r,transform:i,deduplicatedLinks:o,nodes:s,hoveredNode:a}=t,u=i.k,c=ml(n,i);r.fillStyle=l.render.canvas.backgroundColor,r.fillRect(0,0,n.width,n.height),r.save(),r.translate(i.x,i.y),r.scale(i.k,i.k),bl(r,o,a,c);jl(r,kl(r,s,a,c,u),a),r.restore()};function bl(t,e,n,r){const i=[];t.strokeStyle=vl.link.default.color,t.lineWidth=vl.link.default.width;for(const o of e)_l(o,r)&&(!n||o.source!==n&&o.target!==n?xl(t,o):i.push(o));i.length>0&&(t.strokeStyle=vl.link.emphasized.color,t.lineWidth=vl.link.emphasized.width,i.forEach(e=>xl(t,e)))}function _l(t,e){const n=gl(t.source.x,t.source.y,e),r=gl(t.target.x,t.target.y,e);return n||r}function xl(t,e){t.beginPath(),t.moveTo(e.source.x,e.source.y),t.lineTo(e.target.x,e.target.y),t.stroke()}function kl(t,e,n,r,i){const o=[];i>=l.render.node.labelCulling.baseZoomThreshold&&o.push(...Ol(e,n,r,i));for(const i of e)gl(i.x,i.y,r,50)&&Nl(t,i,n);return o}function Ol(t,e,n,r){const{baseZoomThreshold:i,highZoomThreshold:o,maxLabelsInView:s,importanceThresholdRange:a}=l.render.node.labelCulling,u=[];for(const s of t){if(!gl(s.x,s.y,n))continue;(s===e||e?.peers?.has(s.asn)||r>=o||Al(s)>=El(r,i,o,a))&&u.push(s)}return u.length>s?(u.sort((t,e)=>Al(e)-Al(t)),u.slice(0,Math.min(s,Math.floor(s*(r/o))))):u}const Al=t=>t.centrality.index,El=(t,e,n,r)=>Ve([e,n],r,t);function Nl(t,e,n){t.beginPath(),t.arc(e.x,e.y,e.size,0,2*Math.PI),e===n?t.fillStyle=vl.node.colors.current:n?.peers?.has(e.asn)?t.fillStyle=vl.node.colors.linked:t.fillStyle=vl.node.colors.default,t.fill(),t.strokeStyle=vl.node.border.color,t.lineWidth=vl.node.border.width,t.stroke()}function jl(t,e,n){if(0!==e.length){t.textAlign="center",t.textBaseline="middle",t.fillStyle=vl.node.label.color;for(const r of e)t.font=r===n?r.labelFontFamilyBold:r.labelFontFamilyNormal,t.fillText(r.label,r.x,r.y+r.size+r.labelFontSizeCalculated/2+4)}}const Sl={rawData:null,canvas:null,ctx:null,draw:null,simulation:null,nodes:null,nodeMap:null,linkMap:null,links:null,deduplicatedLinks:null,zoom:null,hoveredNode:null,transform:Ua};let Tl,$l=!0,Ml=null,Rl=null;function Il(t){Sl.canvas=document.querySelector(t),Sl.ctx=Sl.canvas.getContext("2d"),Sl.canvas.width=window.innerWidth*l.render.pixelRatio,Sl.canvas.height=window.innerHeight*l.render.pixelRatio,Sl.canvas.style.width=`${window.innerWidth}px`,Sl.canvas.style.height=`${window.innerHeight}px`,Sl.ctx.scale(l.render.pixelRatio,l.render.pixelRatio),Sl.draw=()=>{Tl||wl(Sl)},Sl.zoom=Qa().scaleExtent([.3,4]).on("zoom",t=>{Sl.transform=t.transform,Sl.draw()})}function Cl(){let t=0,e=0;Sl.nodes&&Sl.nodes.length>0?(Sl.nodes.forEach(n=>{t+=n.x||0,e+=n.y||0}),t/=Sl.nodes.length,e/=Sl.nodes.length):(t=window.innerWidth/2,e=window.innerHeight/2);const n=window.innerWidth/2,r=window.innerHeight/2,i=l.render.canvas.initialScale,o=n-t*i,s=r-e*i;Oi(Sl.canvas).call(Sl.zoom.transform,Ua.translate(o,s).scale(i))}function Bl(t,e=!1){const n=structuredClone(t.nodes),r=structuredClone(t.links),i=new Map,o=new Map;n.forEach(t=>{if(t.asn=t.asn||0,t.label=t.desc.replace("-DN42","").replace("-MNT","").replace("-AS","").replace("-NEONETWORK","").replace("ICVPN-","").replace("-CRXN",""),e||(i.set(t.asn.toString(),t),i.set(t.label.toLowerCase(),t)),e||(t.labelFontSizeCalculated=Ve([0,l.render.node.labelFontSizeMaxPx],[l.render.node.labelFontSizePx/4,l.render.node.labelFontSizePx],l.render.node.labelFontSizeMaxPx-.5*t.label.length)),e||(t.labelFontFamilyNormal=`${t.labelFontSizeCalculated}px ${l.render.node.labelFontFamily}`),e||(t.labelFontFamilyBold=`bold ${t.labelFontFamilyNormal}`),t.routes?.length){const e=[],n=[];for(let r=0;r<t.routes.length;r++){const i=t.routes[r],o=i.length;if(null!=i.ipv4){const t=qe(i.ipv4);e.push([o,`${t}/${o}`])}else if(null!=i.ipv6){const t=Pe(i.ipv6.high_h32,i.ipv6.high_l32,i.ipv6.low_h32,i.ipv6.low_l32);n.push([o,`${t}/${o}`])}else console.warn(`[preprocess] Unknown or empty IP route for AS${t.asn}, skipped.`)}e.sort((t,e)=>t[0]-e[0]),n.sort((t,e)=>t[0]-e[0]);const r=e.length+n.length;t.routes=new Array(r);let i=0;for(let n=0;n<e.length;n++)t.routes[i++]=e[n][1];for(let e=0;e<n.length;e++)t.routes[i++]=n[e][1]}else t.routes=[];t.centrality.index=t.centrality.index||0,t.centrality.degree=t.centrality.degree||0,t.centrality.betweenness=t.centrality.betweenness||0,t.centrality.closeness=t.centrality.closeness||0});let s=r;if(!e){const t=new Set;s=[],r.forEach(e=>{e.source=n[e.source??0],e.target=n[e.target??0],e.source.peers||(e.source.peers=new Set),e.target.peers||(e.target.peers=new Set),e.source.peers.add(e.target.asn),e.target.peers.add(e.source.asn),o.set(`${e.source.asn}_${e.target.asn}`,!0);const r=e.source.asn,i=e.target.asn,a=r<i?`${r}-${i}`:`${i}-${r}`;t.has(a)||(t.add(a),s.push(e))})}return e||n.forEach(t=>{t.size=Ve(l.render.node.scaleSqrtDomain,l.render.node.scaleSqrtRange,t.centrality.index)||l.render.node.minSize,t.size=Math.max(l.render.node.minSize,t.size),t.size=Math.min(l.render.node.maxSize,t.size)}),{nodes:n,links:r,deduplicatedLinks:s,nodeMap:i,linkMap:o}}function Ll(){Sl.simulation=Hu(Sl.nodes).force("link",Lu(Sl.links).id(t=>t.asn).distance(l.render.d3force.linkDistance)).force("charge",Xu().strength(l.render.d3force.manyBodyStrength)).force("center",cu(window.innerWidth/2,window.innerHeight/2)).alphaDecay(l.render.d3force.alphaDecay).on("tick",Sl.draw).on("end",()=>{Rl(),Tl=!1,$l&&(Cl(),$l=!1)}),Sl.simulation.on("tick",()=>{if(Sl.draw(),Tl){const t=Sl.simulation.alpha();Ml(t),t<.02&&(Rl(),Tl=!1,$l&&(Cl(),$l=!1))}}),Sl.draw()}function zl(t,e,n,r,i){Tl=!0,Ml=r,Rl=i,n("parsing"),Sl.rawData=t,Il(e),Object.assign(Sl,Bl(t)),n("rendering"),Ll(),He(Sl),Qu(Sl)}let Fl=null,Dl=null,Pl="",ql=(new Date).getFullYear(),Vl=(new Date).getMonth();const Ul=["January","February","March","April","May","June","July","August","September","October","November","December"],Jl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Hl(){if(Fl)return Fl;const t=document.createElement("div");return t.id="map-version-overlay",t.innerHTML=`\n    <div class="map-version-popup">\n      <div class="map-version-header">\n        <h2 class="map-version-title">\n          Time Machine\n        </h2>\n        <button class="map-version-close" onclick="window.closeMapVersions()" aria-label="Close">\n          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n          </svg>\n        </button>\n      </div>\n      \n      <div class="map-version-nav">\n        <div class="nav-left">Loaded: ${Pl}</div>\n        <div class="quick-actions">\n          <button class="quick-btn" onclick="window.loadLatestVersion()" aria-label="Load latest version">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>\n            </svg>\n            Go to latest\n          </button>\n        </div>\n      </div>\n\n      <div id="map-version-content" class="map-version-content">\n        <div class="map-version-loading">\n          <div class="loading-spinner fetching"></div>\n          <div class="loading-text">Loading map snapshots...</div>\n        </div>\n      </div>\n    </div>\n  `,document.body.appendChild(t),Fl=t,t}function Xl(t){const e=t.match(/map_(\d{4})_(\d{2})_(\d{2})\.bin/);if(e){const[,t,n,r]=e;return new Date(t,n-1,r).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}return""}function Wl(t){const e=t.match(/map_(\d{4})_(\d{2})_(\d{2})\.bin/);if(e){const[,t,n,r]=e;return new Date(t,n-1,r)}return new Date(0)}function Yl(t,e,n){return`${l.dn42.timeMachineBinUrlPrefix}/${t}/${e}/${n}`}function Gl(t){window.location.href=`/?data=${encodeURIComponent(t)}`}function Kl(){window.location.href="/"}function Zl(){if(!Dl||0===Object.keys(Dl).length)return'<div class="map-version-error"><p>No map snapshots available.</p></div>';const t=Object.keys(Dl).sort((t,e)=>e.localeCompare(t)),e=new Date;let n=`\n    <div class="calendar-section">\n      <div class="calendar-nav">\n        <select class="year-select" onchange="window.handleYearChange(this.value)">\n          ${t.map(t=>`<option value="${t}" ${t==ql?"selected":""}>${t}</option>`).join("")}\n        </select>\n      </div>\n      <div class="calendar-months">\n  `;const r=Dl[ql];if(r)for(let t=0;t<12;t++){const i=String(t+1).padStart(2,"0"),o=r[i],s=o&&o.length>0;n+=`\n        <div class="calendar-month ${s?"has-data":""} ${t===Vl&&ql==e.getFullYear()?"current":""}"\n             ${s?`onclick="window.showMonthDetails('${ql}', '${i}')"`:""}>\n          <div class="month-name">${Jl[t]}</div>\n          <div class="month-count">${s?o.length:0}</div>\n        </div>\n      `}return n+="\n      </div>\n    </div>\n  ",n}async function Ql(t){const e=document.getElementById("map-version-content");Dl=t,Dl&&0!==Object.keys(Dl).length?e.innerHTML=Zl():e.innerHTML='\n      <div class="map-version-error">\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>\n        </svg>\n        <p>No map snapshots available.</p>\n        <p>The time machine service may be temporarily unavailable.</p>\n      </div>\n    '}async function tc(){try{Hl().classList.add("show");document.getElementById("map-version-content").innerHTML='\n      <div class="map-version-loading">\n        <div class="loading-spinner fetching"></div>\n        <div class="loading-text">Loading map snapshots...</div>\n      </div>\n    ';const t=await Fe();await Ql(t)}catch(t){console.error("Error fetching map versions:",t);document.getElementById("map-version-content").innerHTML=`\n      <div class="map-version-error">\n        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>\n        </svg>\n        <p>Failed to load network snapshots: ${t.message}</p>\n        <p>The time machine service may be temporarily unavailable.</p>\n        <button onclick="window.showMapVersions()" class="retry-btn">Retry</button>\n      </div>\n    `}}function ec(t){ql=parseInt(t),Ql(Dl)}function nc(t,e){const n=Dl[t][e];if(!n)return;const r=Ul[parseInt(e)-1],i=[...n].sort((t,e)=>{const n=Wl(t);return Wl(e)-n}),o=document.querySelector(".map-version-nav");o&&(o.innerHTML=`\n      <div class="nav-left">\n        <button class="back-btn" onclick="window.backToCalendar()">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>\n          </svg>\n          Back\n        </button>\n      </div>\n      <div class="nav-center">\n        <h3>${r} ${t}</h3>\n      </div>\n    `);let s='\n    <div class="month-details">\n      <div class="files-grid">\n  ';for(const n of i){const r=Xl(n);s+=`\n      <div class="file-card"\n           onclick="window.loadMapVersion('${Yl(t,e,n)}')">\n        <div class="file-date">${r}</div>\n        <div class="file-name">${n}</div>\n      </div>\n    `}s+="\n      </div>\n    </div>\n  ",document.getElementById("map-version-content").innerHTML=s}function rc(){const t=document.querySelector(".map-version-nav");t&&(t.innerHTML=`\n      <div class="nav-left">Loaded: ${Pl}</div>\n      <div class="quick-actions">\n        <button class="quick-btn" onclick="window.loadLatestVersion()" aria-label="Load latest version">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>\n          </svg>\n          Go to latest\n        </button>\n      </div>\n    `),Ql(Dl)}function ic(){Fl&&(rc(),Fl.classList.remove("show"))}function oc(){document.addEventListener("click",t=>{"map-version-overlay"===t.target.id&&ic()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&Fl&&Fl.classList.contains("show")&&ic()})}const sc=()=>{window.showMapVersions=tc,window.closeMapVersions=ic,window.loadMapVersion=Gl,window.loadLatestVersion=Kl,window.handleYearChange=ec,window.showMonthDetails=nc,window.backToCalendar=rc,oc()},ac=t=>{Pl=t};window.onload=async function(){try{i(),bn(),ou(),su(!1);const t=new URLSearchParams(window.location.search),e=await Be(t.get("data")),n=new Date(1e3*e.metadata.data_timestamp);sc(),ac(n.toLocaleString()),wn(n.toLocaleString()),su(!0),zl(e,"#map",o,u,s)}catch(t){console.error("❌ Error initializing the graph: ",t),alert(`Error initializing the graph.\n${t}`)}};</script></body></html>